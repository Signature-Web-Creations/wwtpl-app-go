(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{27:function(e,t,n){},29:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var c,r=n(1),a=n.n(r),s=n(19),i=n.n(s),o=n(4),u=(n(27),n(2)),l=n(6),d=n(11),j=(c={adminHome:"/admin",home:"/",login:"/login",logout:"/logout",showUsers:"/users",addUser:"/adduser",editUser:{url:"/user/edit",params:{id:":id"}},showSourceArchives:"/sourceArchives",showCollections:"/collections",showRecordTypes:"/recordTypes"},Object(d.a)(c,"showCollections","/collections"),Object(d.a)(c,"addCollection","/collections/new"),Object(d.a)(c,"editCollection",{url:"/collection/edit",params:{id:":id"}}),Object(d.a)(c,"newRecord","/record/new"),Object(d.a)(c,"editRecord",{url:"/record/edit",params:{id:":id"}}),Object(d.a)(c,"viewRecord",{url:"/record/view",params:{id:":id"}}),c);function h(e,t){var n="";if(void 0===(n="string"===typeof j[e]?j[e]:void 0!==t?j[e].url+"/"+t.id:j[e].url+"/"+j[e].params.id))throw new Error("Route doesn't exist: ".concat(e));return n}var b=n(0);function p(e){return Object(b.jsx)("div",{className:"uk-margin-top",children:e.children})}function m(e){if(0===e.currentPage)return null;var t=e.type?e.type:"",n="/".concat(t,"?offset=").concat(e.currentPage-1);return Object(b.jsxs)("a",{href:n,children:[Object(b.jsx)("span",{className:"uk-margin-small-right","uk-pagination-previous":"true"}),"Previous"]})}function O(e){if(e.currentPage>=e.pages)return null;var t=e.type?e.type:"",n="/".concat(t,"?offset=").concat(e.currentPage+1);return Object(b.jsxs)("a",{href:n,children:["Next",Object(b.jsx)("span",{className:"uk-margin-small-left","uk-pagination-next":"true"})]})}function f(e){return null===e.pages?null:Object(b.jsxs)("ul",{className:"uk-pagination uk-margin-large-top",children:[Object(b.jsx)("li",{children:Object(b.jsx)(m,{currentPage:e.currentPage,type:e.type})}),Object(b.jsx)("li",{children:Object(b.jsx)("hr",{className:"uk-divider-vertical",style:{height:"30px",padding:"4px 0",borderWidth:"2px"}})}),Object(b.jsx)("li",{children:Object(b.jsx)(O,{currentPage:e.currentPage,pages:e.pages,type:e.type})})]})}n(29);function x(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(""),i=Object(u.a)(s,2),o=i[0],l=i[1],d=Object(r.useState)(""),j=Object(u.a)(d,2),h=j[0],p=j[1],m=Object(r.useState)(""),O=Object(u.a)(m,2),f=O[0],x=O[1],v=Object(r.useState)(""),g=Object(u.a)(v,2),k=g[0],y=g[1],N=Object(r.useState)(""),w=Object(u.a)(N,2),S=w[0],T=w[1],C=Object(r.useState)(!1),A=Object(u.a)(C,2),R=A[0],U=A[1],P="advancedSearchOptions uk-grid-small ".concat(R?"show":""),D=void 0!==e.user&&"editor"!==e.user.role?"uk-width-1-4@s":"uk-width-1-3@s";return Object(b.jsxs)("form",{className:"uk-margin-large-top",onSubmit:function(t){t.preventDefault(),function(){var t={query:c,searchYear:o,searchCollection:h,searchSourceArchive:f,searchRecordType:k,searchStatus:S};e.onSubmit(t)}()},children:[Object(b.jsxs)("div",{className:"searchBar uk-grid-small","uk-grid":"true",children:[Object(b.jsx)("div",{className:"uk-width-expand@s",children:Object(b.jsx)("input",{className:"uk-input",value:c,type:"text",placeholder:"Search",onChange:function(e){a(e.target.value)}})}),Object(b.jsx)("div",{className:"uk-width-1-3@s",children:Object(b.jsxs)("select",{className:"uk-select",value:o,onChange:function(e){l(e.target.value)},children:[Object(b.jsx)("option",{value:"",children:"Year"}),e.years.map((function(e){return Object(b.jsxs)("option",{value:e,children:[" ",e," "]},e)}))]})}),Object(b.jsxs)("div",{className:"advancedSearchButton uk-width-auto@s uk-grid-small","uk-grid":"true",children:[Object(b.jsx)("div",{className:"uk-width-auto",children:Object(b.jsx)("button",{className:"uk-button uk-button-default","uk-icon":"more","uk-tooltip":"Advanced Search Options",onClick:function(){U(!R)}})}),Object(b.jsx)("div",{className:"uk-width-auto",children:Object(b.jsx)("button",{className:"uk-button uk-button-default",type:"submit","uk-icon":"refresh","uk-tooltip":"Clear Search",onClick:function(){a(""),l(""),p(""),x(""),y(""),T("")}})}),Object(b.jsx)("div",{className:"uk-width-auto",children:Object(b.jsx)("button",{className:"uk-button uk-button-primary searchButton",type:"submit","uk-icon":"search","uk-tooltip":"Search"})})]})]}),Object(b.jsxs)("div",{className:P,"uk-grid":"true",children:[Object(b.jsx)("div",{className:D,children:Object(b.jsxs)("select",{className:"uk-select",value:k,onChange:function(e){y(e.target.value)},children:[Object(b.jsx)("option",{value:"",children:" Type "}),e.recordTypes.map((function(e){var t=e.id,n=e.name;return Object(b.jsxs)("option",{value:t,children:[" ",n," "]},t)}))]})}),Object(b.jsx)("div",{className:D,children:Object(b.jsxs)("select",{className:"uk-select",value:f,onChange:function(e){x(e.target.value)},children:[Object(b.jsx)("option",{value:"",children:" Source Archive "}),e.sourceArchives.map((function(e){var t=e.id,n=e.name;return Object(b.jsxs)("option",{value:t,children:[" ",n," "]},t)}))]})}),Object(b.jsx)("div",{className:D,children:Object(b.jsxs)("select",{className:"uk-select",value:h,onChange:function(e){p(e.target.value)},children:[Object(b.jsx)("option",{value:"",children:" Collection "}),e.collections.map((function(e){var t=e.id,n=e.name;return Object(b.jsxs)("option",{value:t,children:[" ",n," "]},t)}))]})}),void 0!==e.user&&"editor"!==e.user.role&&Object(b.jsx)("div",{className:D,children:Object(b.jsxs)("select",{className:"uk-select",value:S,onChange:function(e){T(e.target.value)},children:[Object(b.jsx)("option",{value:"",children:"Status"}),e.status.map((function(e){var t=e.id,n=e.name;return Object(b.jsxs)("option",{value:t,children:[" ",n," "]},t)}))]})})]})]})}function v(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.date}),Object(b.jsx)("td",{children:e.title}),Object(b.jsx)("td",{children:e.type}),Object(b.jsx)("td",{children:Object(b.jsxs)(o.b,{to:h("viewRecord",{id:e.id}),className:"uk-button uk-button-primary",children:[" ","View"," "]})})]})}function g(){return Object(b.jsx)("h1",{children:" Your search did not return any results. "})}function k(e){return Object(b.jsxs)("table",{className:"uk-table uk-table-middle uk-table-divider uk-table-hover uk-margin-medium",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"uk-width-small",children:"Date"}),Object(b.jsx)("th",{children:"Title"}),Object(b.jsx)("th",{children:"Type"}),Object(b.jsx)("th",{className:"uk-table-shrink"})]})}),Object(b.jsx)("tbody",{children:e.records.map((function(e){var t=e.id,n=e.date,c=e.title,r=e.recordType;return Object(b.jsx)(v,{id:t,date:n,title:c,type:null===r?"N/A":r.name},t)}))})]})}function y(e){return null===e.records?e.searched?Object(b.jsx)(g,{}):null:Object(b.jsx)(k,{records:e.records})}var N=n(3),w=n.n(N),S=n(5),T=function(e,t){var n=function(e){var t=[];return e.offset&&null!==e.offset&&t.push("offset=".concat(encodeURIComponent(e.offset))),e.query&&""!==e.query&&t.push("query=".concat(encodeURIComponent(e.query))),e.searchYear&&""!==e.searchYear&&t.push("year=".concat(encodeURIComponent(e.searchYear))),e.searchCollection&&""!==e.searchCollection&&t.push("collection=".concat(encodeURIComponent(e.searchCollection))),e.searchSourceArchive&&""!==e.searchSourceArchive&&t.push("sourceArchive=".concat(encodeURIComponent(e.searchSourceArchive))),e.searchRecordType&&""!==e.searchRecordType&&t.push("recordType=".concat(encodeURIComponent(e.searchRecordType))),e.searchRecordStatus&&""!==e.searchRecordStatus&&t.push("recordStatus=".concat(encodeURIComponent(e.searchRecordStatus))),t}(t);return 0!==n.length?e+"?".concat(n.join("&")):e};function C(e){var t=T("/api/records",e);return fetch(t).then((function(e){return e.json()}))}function A(e){var t=T("/api/public/records",e);return fetch(t).then((function(e){return e.json()}))}function R(){return(R=Object(S.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/records/".concat(t),{method:"GET",mode:"same-origin",cache:"no-cache",credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(S.a)(w.a.mark((function e(t,n){var c,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={username:t,password:n},e.next=3,fetch("/api/login",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 3:return r=e.sent,e.abrupt("return",r.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(S.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/logout",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(S.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(S.a)(w.a.mark((function e(t,n){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/".concat(t),{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(S.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/".concat(t),{method:"GET",mode:"same-origin",cache:"no-cache",credentials:"include"});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(S.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users",{method:"GET",mode:"same-origin",cache:"no-cache",credentials:"include"});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(S.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user_roles",{method:"GET",mode:"same-origin",cache:"no-cache"});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(S.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/disable/".concat(t),{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(S.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/enable/".concat(t),{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(e){var t=new FormData;return t.append("title",e.title),t.append("content",e.content),null!==e.file&&t.append("file",e.file),t.append("date",e.date),t.append("author",e.author),t.append("recordType",e.recordType),t.append("sourceArchive",e.sourceArchive),t.append("collections",e.collections),t.append("recordStatus",e.recordStatus),t.append("shouldKeepFile",e.shouldKeepFile),t};function H(){return(H=Object(S.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/records",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",body:L(t)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(S.a)(w.a.mark((function e(t,n){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/records/".concat(t),{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",body:L(n)});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(S.a)(w.a.mark((function e(t,n){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/records/status/".concat(t),{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({recordId:t,recordStatusId:n})});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(S.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/records/delete/".concat(t),{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(S.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/records/restore/".concat(t),{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(S.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/sourceArchives",{method:"GET",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(S.a)(w.a.mark((function e(t){var n,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("name",t),e.next=4,fetch("/api/sourceArchives",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",body:n});case 4:return c=e.sent,e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(S.a)(w.a.mark((function e(t,n){var c,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("name",n),e.next=4,fetch("/api/sourceArchives/".concat(t),{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",body:c});case 4:return r=e.sent,e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(S.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/collections",{method:"GET",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(S.a)(w.a.mark((function e(t){var n,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("name",t),e.next=4,fetch("/api/collections",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",body:n});case 4:return c=e.sent,e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(S.a)(w.a.mark((function e(t,n){var c,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("name",n),e.next=4,fetch("/api/collections/".concat(t),{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",body:c});case 4:return r=e.sent,e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(S.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/recordTypes",{method:"GET",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(S.a)(w.a.mark((function e(t){var n,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("name",t),e.next=4,fetch("/api/recordTypes",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",body:n});case 4:return c=e.sent,e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(S.a)(w.a.mark((function e(t,n){var c,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("name",n),e.next=4,fetch("/api/recordTypes/".concat(t),{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",body:c});case 4:return r=e.sent,e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=function(e,t){return e||t};function ne(){return Object(b.jsx)("h1",{children:" Loading "})}function ce(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"uk-width-medium",children:Object(b.jsx)("strong",{children:"Title"})}),Object(b.jsx)("td",{children:e.title})]})}function re(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("strong",{children:" Document "})}),Object(b.jsx)("td",{children:Object(b.jsx)("embed",{src:"/media/".concat(e.src),type:"application/pdf",width:"100%",height:"600px"})})]})}function ae(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("strong",{children:"Image"})}),Object(b.jsx)("td",{children:Object(b.jsx)("img",{alt:e.alt,src:"/media/".concat(e.src)})})]})}function se(e){return null===e.attachmentType?null:"document"===e.attachmentType?Object(b.jsx)(re,{src:e.fileName}):"image"===e.attachmentType?Object(b.jsx)(ae,{alt:e.title,src:e.fileName}):null}function ie(e){var t=""===e.content?"No content":e.content;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("strong",{children:"Text"})}),Object(b.jsxs)("td",{children:[" ",t," "]})]})}var oe=function(e){var t=e.match(/(\d{4})-(\d{2})-(\d{2})/);if(null!==t){var n=t[1],c=t[2],r=t[3];return"".concat(c,"/").concat(r,"/").concat(n)}return e};function ue(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("strong",{children:"Date"})}),Object(b.jsxs)("td",{children:[""===e.date?"Date unknown":oe(e.date)," "]})]})}function le(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("strong",{children:"Origin"})}),Object(b.jsx)("td",{children:te(e.origin,"Origin Unknown")})]})}function de(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("strong",{children:"Author"})}),Object(b.jsx)("td",{children:te(e.author,"Unknown")})]})}function je(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("strong",{children:"Type"})}),Object(b.jsx)("td",{children:te(e.recordType.name,"Unknown")})]})}function he(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("strong",{children:"Source Archive"})}),Object(b.jsx)("td",{children:te(e.sourceArchive.name,"Unknown")})]})}function be(e){var t=function(e){return e?e.split(";"):[]}(e.collections);return 0===t.length&&t.push("Collection Unknown"),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("strong",{children:"Collection"})}),Object(b.jsx)("td",{children:t.map((function(e){return Object(b.jsxs)("span",{className:"uk-label",children:[" ",e," "]},e)}))})]})}function pe(e){var t=e.record;return Object(b.jsx)("table",{className:"uk-table uk-table-small uk-table-divider uk-margin-medium",children:Object(b.jsxs)("tbody",{children:[Object(b.jsx)(ce,{title:t.title}),Object(b.jsx)(se,{title:t.title,attachmentType:t.attachmentType,fileName:t.fileName}),Object(b.jsx)(ie,{content:t.content}),Object(b.jsx)(ue,{date:t.date}),Object(b.jsx)(le,{origin:t.origin}),Object(b.jsx)(de,{author:t.author}),Object(b.jsx)(je,{recordType:t.recordType}),Object(b.jsx)(he,{sourceArchive:t.sourceArchive}),Object(b.jsx)(be,{collections:t.collections})]})})}var me=function(e){var t=Object(l.h)().id,n=Object(r.useState)(null),c=Object(u.a)(n,2),a=c[0],s=c[1];return Object(r.useEffect)((function(){(function(e){return fetch("/api/public/records/".concat(e)).then((function(e){return e.json()}))})(t).then(s)}),[t]),a?Object(b.jsx)(pe,{record:a}):Object(b.jsx)(ne,{})},Oe=n(17),fe=n(22),xe=Object(r.createContext)();function ve(){return Object(r.useContext)(xe)}function ge(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){fetch("/api/user").then((function(e){return e.json()})).then((function(e){e.username&&c(e)}))}),[]);return{user:n,signin:function(e,t,n){(function(e,t){return U.apply(this,arguments)})(e,t).then((function(e){e.success?c(e.user):n("invalid username/password")}))},signout:function(){c(!1),function(){P.apply(this,arguments)}()}}}function ke(e){var t=e.children,n=ge();return Object(b.jsx)(xe.Provider,{value:n,children:t})}function ye(e){var t=e.children,n=Object(fe.a)(e,["children"]),c=ve();return Object(b.jsx)(l.b,Object(Oe.a)(Object(Oe.a)({},n),{},{render:function(){return c.user?t:Object(b.jsx)(l.a,{to:"/"})}}))}var Ne=function(e){var t="";return t="error"===e.type?"uk-alert-danger":"warning"===e.type?"uk-alert-warning":"uk-alert-success",Object(b.jsxs)("div",{"uk-alert":"true",className:t,children:["warning"!==e.type&&Object(b.jsx)("button",{className:"uk-alert-close","uk-close":"true",onClick:e.onClick}),Object(b.jsx)("p",{children:e.message})]})};function we(e){var t=ve(),n=Object(r.useState)(""),c=Object(u.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(""),o=Object(u.a)(i,2),d=o[0],j=o[1],h=Object(r.useState)(null),p=Object(u.a)(h,2),m=p[0],O=p[1];return t.user?Object(b.jsx)(l.a,{to:"/dashboard"}):Object(b.jsxs)("form",{className:"uk-form-stacked uk-form-width-large uk-margin-top",onSubmit:function(e){e.preventDefault(),t.signin(a,d,(function(e){return O(e)}))},children:[m&&Object(b.jsx)(Ne,{onClick:function(){O(null)},message:m,type:"error"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"uk-form-label",children:" Username "}),Object(b.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",name:"username",onChange:function(e){O(null),s(e.target.value)},value:a})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"uk-form-label",children:" Password "}),Object(b.jsx)("input",{className:"uk-form-width-large uk-input",type:"password",name:"password",onChange:function(e){O(null),j(e.target.value)},value:d})]}),Object(b.jsx)("input",{className:"uk-button uk-button-primary uk-margin-top",type:"submit",value:"login"})]})}function Se(){return new URLSearchParams(Object(l.g)().search)}var Te=function(e){var t=ve(),n=function(e){return"unpublished"===e?"uk-label uk-label-warning":"deleted"===e?"uk-label uk-label-danger":"pending_approval"===e?"uk-label":"uk-label uk-label-success"},c=h("editRecord",{id:e.id});return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(o.b,{to:c,className:"uk-icon-link uk-margin-small-right","uk-icon":"file-edit"})}),"admin"===t.user.role&&Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:e.onDelete,className:"uk-icon-link uk-margin-small-right","uk-icon":e.deleted?"refresh":"trash"})}),Object(b.jsx)("td",{children:e.date}),Object(b.jsx)("td",{children:e.title}),Object(b.jsx)("td",{children:e.deleted?Object(b.jsx)("span",{className:n("deleted"),children:" Deleted "}):Object(b.jsx)("span",{className:n(e.status.name),children:e.status.name})})]})};function Ce(){return Object(b.jsx)("h1",{children:" Your search did not return any results. "})}function Ae(e){return Object(b.jsxs)("table",{className:"uk-table uk-table-middle uk-table-divider uk-table-hover uk-margin-medium",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"uk-table-small"}),void 0!==e.user&&"admin"===e.user.role&&Object(b.jsx)("th",{className:"uk-table-small"}),Object(b.jsx)("th",{className:"uk-width-small",children:"Date"}),Object(b.jsx)("th",{children:"Title"}),Object(b.jsx)("th",{children:"Status"})]})}),Object(b.jsx)("tbody",{children:e.records.map((function(t){var n=t.id,c=t.date,r=t.title,a=t.recordStatus,s=t.deleted;return Object(b.jsx)(Te,{id:n,date:c,title:r,status:a,deleted:s,onDelete:function(){e.onDelete(n)}},n)}))})]})}function Re(e){return null===e.records?e.searched?Object(b.jsx)(Ce,{}):null:Object(b.jsx)(Ae,{records:e.records,onDelete:e.onDelete})}function Ue(){var e=ve(),t=function(e){var t=e.get("offset");if(null===t)return 0;var n=parseInt(t);return isNaN(n)?0:n}(Se()),n=Object(r.useState)(null),c=Object(u.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)([]),l=Object(u.a)(i,2),d=l[0],j=l[1],p=Object(r.useState)(null),m=Object(u.a)(p,2),O=m[0],v=m[1],g=Object(r.useState)([]),k=Object(u.a)(g,2),y=k[0],N=k[1],w=Object(r.useState)([]),S=Object(u.a)(w,2),T=S[0],A=S[1],R=Object(r.useState)([]),U=Object(u.a)(R,2),P=U[0],D=U[1],E=Object(r.useState)([]),I=Object(u.a)(E,2),F=I[0],Y=I[1],q=Object(r.useState)(!1),G=Object(u.a)(q,2),L=G[0],H=G[1];return Object(r.useEffect)((function(){C({offset:t}).then((function(e){var t=e.records,n=e.pages,c=e.years,r=e.collections,a=e.sourceArchives,i=e.recordTypes,o=e.recordStatus;s(t),v(n),j(c),A(r.collections),D(a),N(i),Y(o)}))}),[t,e.user]),Object(b.jsxs)(b.Fragment,{children:["admin"===e.user.role&&Object(b.jsxs)(o.b,{to:h("showUsers"),className:"uk-button uk-button-default uk-margin-right",children:[" ","Manage Users"," "]}),"admin"===e.user.role&&Object(b.jsxs)(o.b,{to:h("showSourceArchives"),className:"uk-button uk-button-default uk-margin-right",children:[" ","Manage Source Archives"," "]}),"admin"===e.user.role&&Object(b.jsxs)(o.b,{to:h("showCollections"),className:"uk-button uk-button-default uk-margin-right",children:[" ","Manage Collections"," "]}),"admin"===e.user.role&&Object(b.jsxs)(o.b,{to:h("showRecordTypes"),className:"uk-button uk-button-default uk-margin-right uk-margin-top",children:[" ","Manage Record Types"," "]}),"admin"===e.user.role&&Object(b.jsx)("a",{href:"/api/exportCSV",target:"_blank",download:!0,className:"uk-button uk-button-default uk-margin-right uk-margin-top",children:"Export CSV"}),Object(b.jsxs)(o.b,{to:h("newRecord"),className:"uk-button uk-button-default uk-margin-right uk-margin-top",children:[" ","New Record"," "]}),Object(b.jsx)(x,{years:d||[],recordTypes:y,collections:T,sourceArchives:P,status:F,user:e.user,onSubmit:function(n){if(e.user){var c=n.query,r=n.searchYear,a=n.searchCollection,i=n.searchSourceArchive,o=n.searchRecordType,u=n.searchStatus;C({offset:t,query:c,searchYear:r,searchCollection:a,searchSourceArchive:i,searchRecordType:o,searchStatus:u}).then((function(e){var t=e.records,n=e.pages,c=e.years;s(t),v(n),j(c),H(!0)}))}}}),Object(b.jsx)(f,{currentPage:t||0,pages:O,type:"admin"}),Object(b.jsx)(Re,{searched:L,records:a,user:e.user,onDelete:function(e){var t=!1,n=a.map((function(n){return n.id===e?(n.deleted=!n.deleted,t=n.deleted,n):n}));t?function(e){B.apply(this,arguments)}(e):function(e){K.apply(this,arguments)}(e),s(n)}})]})}function Pe(e){return 0===e.trim().length}function De(e){return Object(b.jsxs)("label",{className:"uk-form-danger",children:[" *",e.error," "]})}function Ee(e){return Object(b.jsx)("div",{className:"uk-form-controls",children:Object(b.jsxs)("div",{"uk-form-custom":"target: true",children:[Object(b.jsx)("input",{type:"file",name:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:e.onChange}),Object(b.jsx)("input",{class:"uk-input uk-form-width-large",type:"text",placeholder:"Select file",disabled:!0})]})})}function Ie(e){var t=null;return"image"===e.attachmentType?t=Object(b.jsx)("img",{alt:"file attachment",src:"/media/".concat(e.fileName)}):"document"===e.attachmentType&&(t=Object(b.jsx)("embed",{src:"/media/".concat(e.fileName),type:"application/pdf",width:"100%",height:"600px"})),Object(b.jsx)("div",{className:"uk-form-controls",children:t})}var Fe=function(e){var t=Object(l.h)().id,n=Object(r.useState)(""),c=Object(u.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(""),o=Object(u.a)(i,2),d=o[0],j=o[1],h=Object(r.useState)(null),p=Object(u.a)(h,2),m=p[0],O=p[1],f=Object(r.useState)(null),x=Object(u.a)(f,2),v=x[0],g=x[1],k=Object(r.useState)(null),y=Object(u.a)(k,2),N=y[0],w=y[1],S=Object(r.useState)(!1),T=Object(u.a)(S,2),C=T[0],A=T[1],U=Object(r.useState)(null),P=Object(u.a)(U,2),D=P[0],E=P[1],I=Object(r.useState)(""),F=Object(u.a)(I,2),Y=F[0],q=F[1],G=Object(r.useState)(""),L=Object(u.a)(G,2),B=L[0],K=L[1],V=Object(r.useState)(""),_=Object(u.a)(V,2),z=_[0],W=_[1],Q=Object(r.useState)(""),X=Object(u.a)(Q,2),Z=X[0],$=X[1],ee=Object(r.useState)(""),te=Object(u.a)(ee,2),ne=te[0],ce=te[1],re=Object(r.useState)([]),ae=Object(u.a)(re,2),se=ae[0],ie=ae[1],oe=Object(r.useState)(null),ue=Object(u.a)(oe,2),le=ue[0],de=ue[1],je=void 0===t,he=Object(r.useState)({message:null,type:null}),be=Object(u.a)(he,2),pe=be[0],me=be[1],Oe=Object(r.useState)({title:null,date:null,recordType:null,sourceArchive:null,collections:null}),fe=Object(u.a)(Oe,2),xe=fe[0],ve=fe[1],ge=function(e){if(void 0===xe[e])throw new Error("Cannot create helper function for unknown field: ".concat(e));return function(){if(xe[e]){var t={};t[e]=null,ve(Object.assign(xe,t))}}},ke=ge("title"),ye=ge("date"),we=ge("recordType"),Se=ge("sourceArchive"),Te=ge("collections"),Ce=function(){var e=!0,t={};return Pe(a)&&(t.title="Title is required",e=!1),t.date=Pe(Y)?"Date is required.":null,e=e&&null===t.date,""===Z&&(t.recordType="You need to select a record type",e=!1),""===ne&&(t.sourceArchive="You need to select a source archive",e=!1),0===se.length&&(t.collections="You need to select at least one collection"),ve(Object.assign(xe,t)),e};Object(r.useEffect)((function(){je||function(e){return R.apply(this,arguments)}(t).then((function(n){if(n.record){var c=n.record;s(c.title),j(c.content),q(c.date),K(c.origin),W(c.author),null!==c.recordType&&$(c.recordType.id),null!==c.attachmentType&&(w(c.attachmentType),g(c.fileName),A(!0),E(!0)),null!==c.sourceArchive&&ce(c.sourceArchive.id),3===c.recordStatus.id?(!function(e,t){J.apply(this,arguments)}(t,4),de(4)):de(c.recordStatus.id);var r=[];null!==c.collections&&(c.collections.split(";").forEach((function(t){e.collectionToId[t]&&r.push(e.collectionToId[t])})),ie(r))}}))}),[je,t,e.collectionToId]);var Ae=function(e){var t=parseInt(e);if(isNaN(t))throw new Error("Couldn't parse int on string: ".concat(e));return t},Re=function(e){if(Ce()){var n={title:a.trim(),content:d.trim(),file:m,date:Y.trim(),origin:B.trim(),author:z.trim(),recordType:Ae(Z),sourceArchive:Ae(ne),collections:se.map(Ae),recordStatus:null===e?1:e,shouldKeepFile:C};je?function(e){return H.apply(this,arguments)}(n).then((function(e){e.error?me({message:e.error,type:"error"}):(s(""),j(""),q(""),K(""),W(""),$(""),ce(""),ie([]),me({message:e.success,type:"success"}))})):function(e,t){return M.apply(this,arguments)}(Ae(t),n).then((function(e){e.error?me({message:e.error,type:"error"}):window.location="/"}))}else me({message:"Please fill out required fields correctly",type:"error"})},Ue=je?"New Record":"Edit Record";return Object(b.jsxs)("form",{className:"uk-form-horizontal uk-margin-large uk-margin-top",encType:"multipart/form-data",onSubmit:Re,children:[pe.message&&Object(b.jsx)(Ne,{onChange:function(){me({message:null,type:null})},message:pe.message,type:pe.type}),"unpublished"===le&&Object(b.jsx)(Ne,{message:"The record has been unpublished while in edit mode!",type:"warning"}),Object(b.jsxs)("h1",{children:[" ",Ue," "]}),Object(b.jsxs)("div",{className:"uk-margin",children:[Object(b.jsx)("label",{className:"uk-form-label",children:" Title "}),Object(b.jsx)("div",{className:"uk-form-controls",children:Object(b.jsx)("input",{className:"uk-form-width-large uk-input "+(xe.title&&"uk-form-danger"),type:"text",value:a,onChange:function(e){ke(),s(e.target.value)}})})]}),Object(b.jsxs)("div",{className:"uk-margin",children:[Object(b.jsxs)("label",{htmlFor:"file",className:"uk-form-label",children:[" ","File"," "]}),C?Object(b.jsx)(Ie,{fileName:v,attachmentType:N}):Object(b.jsx)(Ee,{fileName:v,attachmentType:N,onChange:function(e){O(e.target.files[0])}}),D&&Object(b.jsx)("div",{className:"uk-form-controls",children:Object(b.jsx)("button",{className:"uk-button uk-button-secondary uk-margin-top",onClick:function(e){e.preventDefault(),A(!C)},children:C?"Remove File":"Undo"})})]}),Object(b.jsxs)("div",{className:"uk-margin",children:[Object(b.jsx)("label",{className:"uk-form-label",children:" Content "}),Object(b.jsx)("div",{className:"uk-form-controls",children:Object(b.jsx)("textarea",{className:"uk-form-width-large uk-textarea",value:d,onChange:function(e){j(e.target.value)}})})]}),Object(b.jsxs)("div",{className:"uk-margin",children:[Object(b.jsx)("label",{className:"uk-form-label",children:" Date "}),Object(b.jsx)("div",{className:"uk-form-controls",children:Object(b.jsx)("input",{className:"uk-form-width-large uk-input "+(xe.date&&"uk-form-danger"),type:"date",value:Y,onChange:function(e){ye(),q(e.target.value)}})})]}),Object(b.jsxs)("div",{className:"uk-margin",children:[Object(b.jsx)("label",{className:"uk-form-label",children:" Origin "}),Object(b.jsx)("div",{className:"uk-form-controls",children:Object(b.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",value:B,onChange:function(e){K(e.target.value)}})})]}),Object(b.jsxs)("div",{className:"uk-margin",children:[Object(b.jsx)("label",{className:"uk-form-label",children:" Author "}),Object(b.jsx)("div",{className:"uk-form-controls",children:Object(b.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",value:z,onChange:function(e){W(e.target.value)}})})]}),Object(b.jsxs)("div",{className:"uk-margin",children:[Object(b.jsx)("label",{className:"uk-form-label",children:" Record Type "}),Object(b.jsx)("div",{className:"uk-form-controls",children:Object(b.jsxs)("select",{className:"uk-form-width-large uk-select "+(xe.recordType&&"uk-form-danger"),value:Z,onChange:function(e){we(),$(e.target.value)},children:[Object(b.jsx)("option",{value:"",children:" No Record Type "}),e.recordTypes.map((function(e){var t=e.id,n=e.name;return Object(b.jsxs)("option",{value:t,children:[" ",n," "]},t)}))]})})]}),Object(b.jsxs)("div",{className:"uk-margin",children:[Object(b.jsx)("label",{className:"uk-form-label",children:" Source Archive "}),Object(b.jsx)("div",{className:"uk-form-controls",children:Object(b.jsxs)("select",{className:"uk-form-width-large uk-select "+(xe.sourceArchive&&"uk-form-danger"),value:ne,onChange:function(e){Se(),ce(e.target.value)},children:[Object(b.jsx)("option",{value:"",children:" No Source Archive "}),e.sourceArchives.map((function(e){var t=e.id,n=e.name;return Object(b.jsxs)("option",{value:t,children:[" ",n," "]},t)}))]})})]}),Object(b.jsxs)("div",{className:"uk-margin",children:[Object(b.jsx)("label",{className:"uk-form-label",children:" Collections "}),Object(b.jsxs)("div",{className:"uk-form-controls uk-form-controls-text",children:[Object(b.jsx)("div",{children:xe.collections&&Object(b.jsx)(De,{error:xe.collections})}),Object(b.jsx)("div",{className:"uk-grid-small uk-child-width-1-2 uk-grid",children:e.collections.map((function(e){var t=e.id,n=e.name;return Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{className:"uk-checkbox",type:"checkbox",name:"collections",value:t,checked:se.includes(t),onChange:function(){Te(),function(e){se.includes(e)?ie(se.filter((function(t){return t!==e}))):ie(se.concat(e))}(t)}},t),"\xa0\xa0 ",n]},t)}))})]})]}),Object(b.jsxs)("div",{className:"uk-form-width-large",children:[Object(b.jsx)("input",{className:"uk-button uk-button-default uk-margin-top uk-margin-right",onClick:function(){Re(le)},type:"button",value:"Save"}),!je&&1!==le&&Object(b.jsx)("input",{className:"uk-button uk-button-primary uk-margin-top",onClick:function(){Re(3)},type:"button",value:"Save & Publish"}),(je||1===le)&&Object(b.jsx)("input",{className:"uk-button uk-button-primary uk-margin-top",onClick:function(){Re(2)},type:"button",value:"Submit for Approval"})]})]})};function Ye(e){return Object(b.jsx)("button",{onClick:function(t){t.preventDefault(),e.toggle(!e.on)},children:e.on?e.onText:e.offText})}var qe=function(){var e=Object(l.h)().id,t=void 0===e;console.log("Id is:",e),console.log("Is New Record",t);var n=Object(r.useState)(""),c=Object(u.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(""),o=Object(u.a)(i,2),d=o[0],j=o[1],h=Object(r.useState)(""),p=Object(u.a)(h,2),m=p[0],O=p[1],f=Object(r.useState)(""),x=Object(u.a)(f,2),v=x[0],g=x[1],k=Object(r.useState)(!1),y=Object(u.a)(k,2),N=y[0],w=y[1],S=Object(r.useState)(!1),T=Object(u.a)(S,2),C=T[0],A=T[1],R=Object(r.useState)(1),U=Object(u.a)(R,2),P=U[0],F=U[1],q=Object(r.useState)([]),G=Object(u.a)(q,2),L=G[0],H=G[1],M=Object(r.useState)(null),J=Object(u.a)(M,2),B=J[0],K=J[1],V=Object(r.useState)(null),_=Object(u.a)(V,2),z=_[0],W=_[1];return Object(r.useEffect)((function(){t||(console.log("Getting data for user: ",e),function(e){return I.apply(this,arguments)}(e).then((function(e){e.user&&(console.log("Got user data"),s(e.user.firstName),j(e.user.lastName),O(e.user.username),"editor"===e.user.role?F(1):"publisher"===e.user.role?F(2):"admin"===e.user.role&&F(3),w(!0),A(!0))}))),function(){return Y.apply(this,arguments)}().then((function(e){e.roles&&H(e.roles)}))}),[e,t]),Object(b.jsxs)("form",{className:"uk-form-stacked uk-form-width-large uk-margin-top",onSubmit:function(n){if(n.preventDefault(),t)(function(e){return D.apply(this,arguments)})({firstName:a,lastName:d,username:m,password:v,roleId:P}).then((function(e){e.success?(W(e.success),s(""),j(""),O(""),g(""),F(1)):K(e.error)}));else{var c={firstName:a,lastName:d,roleId:P};N||(c.username=m),C||0===v.length||(c.password=v),function(e,t){return E.apply(this,arguments)}(e,c).then((function(e){e.success?W(e.success):K(e.error)}))}},children:[z&&Object(b.jsx)(Ne,{onClick:function(){W(null)},message:z,type:"success"}),B&&Object(b.jsx)(Ne,{onClick:function(){K(null)},message:B,type:"error"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"uk-form-label uk-margin-top",children:"First Name"}),Object(b.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",name:"firstName",onChange:function(e){s(e.target.value)},value:a})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"uk-form-label uk-margin-top",children:"Last Name"}),Object(b.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",name:"lastName",onChange:function(e){j(e.target.value)},value:d})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"uk-form-label uk-margin-top",children:"Username"}),Object(b.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",name:"username",onChange:function(e){O(e.target.value)},value:m,disabled:N}),!1===t&&Object(b.jsx)(Ye,{offText:"lock username",onText:"change username",on:N,toggle:w})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"uk-form-label uk-margin-top",children:"Password"}),Object(b.jsx)("input",{className:"uk-form-width-large uk-input",type:"password",name:"password",onChange:function(e){g(e.target.value)},value:v,disabled:C}),!1===t&&Object(b.jsx)(Ye,{offText:"lock password",onText:"change password",on:C,toggle:A})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"uk-form-label uk-margin-top",children:"Role"}),Object(b.jsx)("select",{className:"uk-select",value:P,onChange:function(e){var t=parseInt(e.target.value);isNaN(t)?F(1):F(t)},children:0!==L.length&&L.map((function(e){var t,n=e.id,c=e.name;return Object(b.jsxs)("option",{value:n,children:[" ",(t=c,t.length>0?t[0].toUpperCase()+t.slice(1):t)," "]},n)}))})]}),Object(b.jsx)("input",{className:"uk-button uk-button-primary uk-margin-top",type:"submit",value:t?"Create User":"Update User"})]})};function Ge(e){var t=ve(),n=e.id,c=e.firstName,r=e.lastName,a=e.username,s=e.role,i=e.active;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(o.b,{to:h("editUser",{id:n}),className:"uk-icon-link uk-margin-small-right","uk-icon":"file-edit"})}),Object(b.jsx)("td",{children:t.user.username!==a&&Object(b.jsx)("button",{onClick:e.changeStatus,className:"uk-icon-link uk-margin-small-right","uk-icon":i?"trash":"refresh"})}),Object(b.jsx)("td",{children:r}),Object(b.jsx)("td",{children:c}),Object(b.jsx)("td",{children:a}),Object(b.jsx)("td",{children:s}),Object(b.jsx)("td",{children:Object(b.jsx)("span",{className:function(e){return e?"uk-label uk-label-success":"uk-label uk-label-warning"}(i),children:i?"Active":"Inactive"})})]})}function Le(e){var t=Object(r.useState)([]),n=Object(u.a)(t,2),c=n[0],a=n[1],s=function(e){var t=!0,n=c.map((function(n){return n.id===e?(n.active=!n.active,t=!n.active,n):n}));t?function(e){q.apply(this,arguments)}(e):function(e){G.apply(this,arguments)}(e),a(n)};return Object(r.useEffect)((function(){(function(){return F.apply(this,arguments)})().then((function(e){e.users&&a(e.users)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsxs)(o.b,{to:h("addUser"),className:"uk-button uk-button-primary uk-margin-right",children:[" ","Add New User"," "]}),Object(b.jsxs)("table",{className:"uk-table uk-table-middle uk-table-divider uk-table-hover uk-margin-medium",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"uk-table-small"}),Object(b.jsx)("th",{className:"uk-table-small"}),Object(b.jsx)("th",{className:"uk-width-small",children:"Last Name"}),Object(b.jsx)("th",{children:"First Name"}),Object(b.jsx)("th",{children:"Username"}),Object(b.jsx)("th",{children:"Role"}),Object(b.jsx)("th",{children:"Status"})]})}),Object(b.jsx)("tbody",{children:c.map((function(e){var t=e.id,n=e.firstName,c=e.lastName,r=e.username,a=e.role,i=e.active;return Object(b.jsx)(Ge,{id:t,firstName:n,lastName:c,username:r,role:a,active:i,changeStatus:function(){s(t)}})}))})]})]})}function He(e){var t=e.name,n=e.editable;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:n?Object(b.jsx)("input",{type:"text",className:"uk-input",value:t,onChange:e.onChange,autoFocus:!0}):Object(b.jsxs)(b.Fragment,{children:[" ",t," "]})}),Object(b.jsx)("td",{align:"right",children:n?Object(b.jsx)("button",{className:"uk-button",onClick:e.onClickSave,children:"Save"}):Object(b.jsx)("button",{className:"uk-button",onClick:e.onClickEdit,children:"Edit"})})]})}function Me(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(-1),i=Object(u.a)(s,2),o=i[0],l=i[1];return Object(b.jsxs)("div",{children:[Object(b.jsxs)("h2",{children:[" ",e.title," "]}),Object(b.jsxs)("table",{className:"uk-table uk-table-middle uk-table-divider uk-table-hover uk-margin-medium",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"uk-table-large",children:"Name"}),Object(b.jsx)("th",{className:"uk-table-small"})]})}),Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("input",{type:"text",className:"uk-input",placeholder:"Enter Name",value:c,onChange:function(e){return a(e.target.value)},autoFocus:!0})}),Object(b.jsx)("td",{align:"right",children:Object(b.jsx)("button",{className:"uk-button uk-button-primary",onClick:function(){e.handleAdd(c)&&a("")},children:"Add"})})]}),e.rows.map((function(t){var n=t.id,c=t.name;return Object(b.jsx)(He,{id:n,name:c,editable:n===o,onChange:function(t){e.handleChange(n,t.target.value)},onClickSave:function(){e.handleUpdate(n,c)&&l(-1)},onClickEdit:function(){return l(n)}},n)}))]})]})]})}function Je(e){var t=Object(r.useState)([]),n=Object(u.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){(function(){return V.apply(this,arguments)})().then((function(e){e.sourceArchives&&a(e.sourceArchives)}))}),[]),Object(b.jsx)(Me,{title:"Manage Source Archives",rows:c,handleAdd:function(e){return 0===e.trim().length&&console.log("Name cannot be empty"),function(e){return _.apply(this,arguments)}(e).then((function(t){if(t.success){console.log(t.success);var n={id:t.id,name:e};return a(c.concat([n])),!0}return console.log(t.error),!1})).then((function(e){return e}))},handleChange:function(e,t){a(c.map((function(n){return e===n.id?Object.assign(n,{name:t}):n})))},handleUpdate:function(e,t){return function(e,t){return z.apply(this,arguments)}(e,t).then((function(e){return e.success?(console.log(e.success),!0):(console.log(e.error),!1)})).then((function(e){return e}))}})}function Be(e){var t=Object(r.useState)([]),n=Object(u.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){(function(){return W.apply(this,arguments)})().then((function(e){e.collections&&a(e.collections)}))}),[]),Object(b.jsx)(Me,{title:"Manage Collections",rows:c,handleAdd:function(e){return 0===e.trim().length&&console.log("Name cannot be empty"),function(e){return Q.apply(this,arguments)}(e).then((function(t){if(t.success){console.log(t.success);var n={id:t.id,name:e};return a(c.concat([n])),!0}return console.log(t.error),!1})).then((function(e){return e}))},handleChange:function(e,t){a(c.map((function(n){return e===n.id?Object.assign(n,{name:t}):n})))},handleUpdate:function(e,t){return function(e,t){return X.apply(this,arguments)}(e,t).then((function(e){return e.success?(console.log(e.success),!0):(console.log(e.error),!1)})).then((function(e){return e}))}})}function Ke(e){var t=Object(r.useState)([]),n=Object(u.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){(function(){return Z.apply(this,arguments)})().then((function(e){e.recordTypes&&a(e.recordTypes)}))}),[]),Object(b.jsx)(Me,{title:"Manage Record Types",rows:c,handleAdd:function(e){return 0===e.trim().length&&console.log("Name cannot be empty"),function(e){return $.apply(this,arguments)}(e).then((function(t){if(t.success){console.log(t.success);var n={id:t.id,name:e};return a(c.concat([n])),!0}return console.log(t.error),!1})).then((function(e){return e}))},handleChange:function(e,t){a(c.map((function(n){return e===n.id?Object.assign(n,{name:t}):n})))},handleUpdate:function(e,t){return function(e,t){return ee.apply(this,arguments)}(e,t).then((function(e){return e.success?(console.log(e.success),!0):(console.log(e.error),!1)})).then((function(e){return e}))}})}var Ve=function(){var e=ve(),t=function(e){var t=e.get("offset");if(null===t)return 0;var n=parseInt(t);return isNaN(n)?0:n}(Se()),n=Object(r.useState)(null),c=Object(u.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)([]),d=Object(u.a)(i,2),j=d[0],m=d[1],O=Object(r.useState)(null),v=Object(u.a)(O,2),g=v[0],k=v[1],N=Object(r.useState)([]),w=Object(u.a)(N,2),S=w[0],T=w[1],C=Object(r.useState)([]),R=Object(u.a)(C,2),U=R[0],P=R[1],D=Object(r.useState)({}),E=Object(u.a)(D,2),I=E[0],F=E[1],Y=Object(r.useState)([]),q=Object(u.a)(Y,2),G=q[0],L=q[1],H=Object(r.useState)([]),M=Object(u.a)(H,2),J=M[0],B=M[1],K=Object(r.useState)(!1),V=Object(u.a)(K,2),_=V[0],z=V[1];return Object(r.useEffect)((function(){A({offset:t}).then((function(e){var t=e.records,n=e.pages,c=e.years,r=e.collections,a=e.sourceArchives,i=e.recordTypes,o=e.recordStatus;s(t),k(n),m(c),P(r.collections),F(r.collectionToId),L(a),T(i),B(o)}))}),[t]),Object(b.jsxs)("div",{className:"uk-marign-top",children:[Object(b.jsxs)("header",{children:[Object(b.jsx)("h1",{children:" History Database "}),Object(b.jsxs)("nav",{className:"uk-navbar",children:[Object(b.jsx)("div",{className:"uk-nav-bar-left",children:Object(b.jsx)("ul",{className:"uk-navbar-nav",children:e.user?Object(b.jsx)("li",{children:Object(b.jsx)(o.b,{to:h("adminHome"),children:" Dashboard "})}):Object(b.jsx)("li",{children:Object(b.jsx)(o.b,{to:h("home"),children:" Home "})})})}),Object(b.jsx)("div",{className:"uk-navbar-right",children:Object(b.jsx)("ul",{className:"uk-navbar-nav",children:e.user?Object(b.jsx)("li",{children:Object(b.jsxs)(o.b,{to:h("logout"),onClick:function(){e.signout()},children:[" ","Logout"," "]})}):Object(b.jsx)("li",{children:Object(b.jsx)(o.b,{to:h("login"),children:" Login "})})})})]})]}),Object(b.jsxs)(l.d,{children:[Object(b.jsxs)(l.b,{path:h("viewRecord"),children:[Object(b.jsx)(p,{children:Object(b.jsx)("h1",{className:"uk-text-lead",children:" History Record "})}),Object(b.jsx)(me,{records:a})]}),Object(b.jsx)(l.b,{path:h("login"),children:Object(b.jsx)(we,{})}),Object(b.jsx)(ye,{path:h("newRecord"),children:Object(b.jsx)(Fe,{recordTypes:S,collections:U,sourceArchives:G,recordStatus:J,buttonText:"Add"})}),Object(b.jsx)(ye,{path:h("editRecord"),children:Object(b.jsx)(Fe,{recordTypes:S,collections:U,sourceArchives:G,recordStatus:J,collectionToId:I,buttonText:"Update"})}),Object(b.jsx)(ye,{path:h("adminHome"),children:Object(b.jsx)(Ue,{records:a})}),Object(b.jsx)(ye,{path:h("addUser"),children:Object(b.jsx)(qe,{})}),Object(b.jsx)(ye,{path:h("editUser"),children:Object(b.jsx)(qe,{})}),Object(b.jsx)(ye,{path:h("showSourceArchives"),children:Object(b.jsx)(Je,{})}),Object(b.jsx)(ye,{path:h("showCollections"),children:Object(b.jsx)(Be,{})}),Object(b.jsx)(ye,{path:h("showRecordTypes"),children:Object(b.jsx)(Ke,{})}),Object(b.jsx)(ye,{path:h("showUsers"),children:Object(b.jsx)(Le,{})}),Object(b.jsx)(l.b,{path:h("logout"),children:Object(b.jsx)(l.a,{to:h("home")})}),Object(b.jsx)(l.b,{path:h("home"),children:e.user?Object(b.jsx)(l.a,{to:h("adminHome")}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(p,{children:[Object(b.jsx)("h1",{className:"uk-text-lead",children:" History Listing "}),Object(b.jsx)(x,{years:j||[],recordTypes:S,collections:U,sourceArchives:G,onSubmit:function(e){var n=e.query,c=e.searchYear,r=e.searchCollection,a=e.searchSourceArchive,i=e.searchRecordType;A({offset:t,query:n,searchYear:c,searchCollection:r,searchSourceArchive:a,searchRecordType:i}).then((function(e){var t=e.records,n=e.pages,c=e.years;s(t),k(n),m(c),z(!0)}))}}),Object(b.jsx)(f,{currentPage:t||0,pages:g})]}),Object(b.jsx)(y,{searched:_,records:a})]})})]})]})},_e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};i.a.render(Object(b.jsx)(ke,{children:Object(b.jsx)(o.a,{children:Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(Ve,{})})})}),document.getElementById("root")),_e()}},[[36,1,2]]]);
//# sourceMappingURL=main.552b96ab.chunk.js.map