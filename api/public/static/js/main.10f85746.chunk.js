(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{24:function(e,t,c){},26:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),s=c(16),a=c.n(s),i=c(6),u=(c(24),c(2)),o=c(3),l=c(0);function j(e){return Object(l.jsx)("div",{className:"uk-margin-top",children:e.children})}function d(e){if(0===e.currentPage)return null;var t="/?offset=".concat(e.currentPage-1);return Object(l.jsxs)("a",{href:t,children:[Object(l.jsx)("span",{className:"uk-margin-small-right","uk-pagination-previous":"true"}),"Previous"]})}function h(e){if(e.currentPage>=e.pages)return null;var t="/?offset=".concat(e.currentPage+1);return Object(l.jsxs)("a",{href:t,children:["Next",Object(l.jsx)("span",{className:"uk-margin-small-left","uk-pagination-next":"true"})]})}function b(e){return null===e.pages?null:Object(l.jsxs)("ul",{className:"uk-pagination uk-margin-large-top",children:[Object(l.jsx)("li",{children:Object(l.jsx)(d,{currentPage:e.currentPage})}),Object(l.jsx)("li",{children:Object(l.jsx)("hr",{className:"uk-divider-vertical",style:{height:"30px",padding:"4px 0",borderWidth:"2px"}})}),Object(l.jsx)("li",{children:Object(l.jsx)(h,{currentPage:e.currentPage,pages:e.pages})})]})}c(26);function O(e){var t=Object(n.useState)(""),c=Object(u.a)(t,2),r=c[0],s=c[1],a=Object(n.useState)(""),i=Object(u.a)(a,2),o=i[0],j=i[1],d=Object(n.useState)(""),h=Object(u.a)(d,2),b=h[0],O=h[1],x=Object(n.useState)(""),f=Object(u.a)(x,2),p=f[0],m=f[1],v=Object(n.useState)(""),g=Object(u.a)(v,2),k=g[0],y=g[1],N=Object(n.useState)(!1),S=Object(u.a)(N,2),w=S[0],C=S[1],T="advancedSearchOptions uk-grid-small ".concat(w?"show":"");return Object(l.jsxs)("form",{className:"uk-margin-top",onSubmit:function(t){t.preventDefault();var c={query:r,searchYear:o,searchCollection:b,searchSourceArchive:p,searchRecordType:k};e.onSubmit(c)},children:[Object(l.jsxs)("div",{className:"searchBar uk-grid-small","uk-grid":"true",children:[Object(l.jsx)("div",{className:"uk-width-expand@s",children:Object(l.jsx)("input",{className:"uk-input",type:"text",placeholder:"Search",onChange:function(e){s(e.target.value)}})}),Object(l.jsx)("div",{className:"uk-width-1-3@s",children:Object(l.jsxs)("select",{className:"uk-select",onChange:function(e){j(e.target.value)},children:[Object(l.jsx)("option",{value:"",children:"Year"}),e.years.map((function(e){return Object(l.jsxs)("option",{value:e,children:[" ",e," "]},e)}))]})}),Object(l.jsxs)("div",{className:"advancedSearchButton uk-width-auto@s uk-grid-small","uk-grid":"true",children:[Object(l.jsx)("div",{className:"uk-width-auto",children:Object(l.jsx)("button",{className:"uk-button uk-button-default","uk-icon":"more","uk-tooltip":"Advanced Search Options",onClick:function(){C(!w)}})}),Object(l.jsx)("div",{className:"uk-width-auto",children:Object(l.jsx)("button",{className:"uk-button uk-button-primary searchButton",type:"submit","uk-icon":"search","uk-tooltip":"Search"})})]})]}),Object(l.jsxs)("div",{className:T,"uk-grid":"true",children:[Object(l.jsx)("div",{className:"uk-width-1-3@s",children:Object(l.jsxs)("select",{className:"uk-select",onChange:function(e){y(e.target.value)},children:[Object(l.jsx)("option",{value:"",children:" Type "}),e.recordTypes.map((function(e){var t=e.id,c=e.name;return Object(l.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})}),Object(l.jsx)("div",{className:"uk-width-1-3@s",children:Object(l.jsxs)("select",{className:"uk-select",onChange:function(e){m(e.target.value)},children:[Object(l.jsx)("option",{value:"",children:" Source Archive "}),e.sourceArchives.map((function(e){var t=e.id,c=e.name;return Object(l.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})}),Object(l.jsx)("div",{className:"uk-width-1-3@s",children:Object(l.jsxs)("select",{className:"uk-select",onChange:function(e){O(e.target.value)},children:[Object(l.jsx)("option",{value:"",children:" Collection "}),e.collections.map((function(e){var t=e.id,c=e.name;return Object(l.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})})]})]})}function x(e){var t="/record/".concat(e.id);return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:e.date}),Object(l.jsx)("td",{children:e.title}),Object(l.jsx)("td",{children:Object(l.jsx)(i.b,{to:t,className:"uk-button uk-button-primary",children:" View "})})]})}function f(){return Object(l.jsx)("h1",{children:" Your search did not return any results. "})}function p(e){return Object(l.jsxs)("table",{className:"uk-table uk-table-middle uk-table-divider uk-table-hover uk-margin-medium",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{className:"uk-width-small",children:"Date"}),Object(l.jsx)("th",{children:"Title"}),Object(l.jsx)("th",{className:"uk-table-shrink"})]})}),Object(l.jsx)("tbody",{children:e.records.map((function(e){var t=e.id,c=e.date,n=e.title;return Object(l.jsx)(x,{id:t,date:c,title:n},t)}))})]})}function m(e){return null===e.records?e.searched?Object(l.jsx)(f,{}):null:Object(l.jsx)(p,{records:e.records})}var v=c(8),g=c.n(v),k=c(12);function y(e){var t,c=[],n="/api/public/records";return e.offset&&null!==e.offset&&c.push("offset=".concat(encodeURIComponent(e.offset))),e.query&&""!==e.query&&c.push("query=".concat(encodeURIComponent(e.query))),e.searchYear&&""!==e.searchYear&&c.push("year=".concat(encodeURIComponent(e.searchYear))),e.searchCollection&&""!==e.searchCollection&&c.push("collection=".concat(encodeURIComponent(e.searchCollection))),e.searchSourceArchive&&""!==e.searchSourceArchive&&c.push("sourceArchive=".concat(encodeURIComponent(e.searchSourceArchive))),e.searchRecordType&&""!==e.searchRecordType&&c.push("recordType=".concat(encodeURIComponent(e.searchRecordType))),t=0!==c.length?n+"?".concat(c.join("&")):n,fetch(t).then((function(e){return e.json()}))}function N(){return(N=Object(k.a)(g.a.mark((function e(t,c){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:t,password:c},e.next=3,fetch("/api/login",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return r=e.sent,e.abrupt("return",r.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/logout",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e,t){return e||t};function C(){return Object(l.jsx)("h1",{children:" Loading "})}function T(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{className:"uk-width-medium",children:Object(l.jsx)("strong",{children:"Title"})}),Object(l.jsx)("td",{children:e.title})]})}function A(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("strong",{children:"Image"})}),Object(l.jsx)("td",{children:Object(l.jsx)("img",{alt:e.alt,src:"/media/".concat(e.src)})})]})}function P(e){return null===e.attachmentType?null:"image"===e.attachmentType?Object(l.jsx)(A,{alt:e.title,src:e.fileName}):null}function R(e){var t=""===e.content?"No content":e.content;return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("strong",{children:"Text"})}),Object(l.jsxs)("td",{children:[" ",t," "]})]})}var U=function(e){var t=e.match(/(\d{4})-(\d{2})-(\d{2})/);if(null!==t){var c=t[1],n=t[2],r=t[3];return"".concat(n,"/").concat(r,"/").concat(c)}return e};function I(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("strong",{children:"Date"})}),Object(l.jsxs)("td",{children:[""===e.date?"Date unknown":U(e.date)," "]})]})}function D(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("strong",{children:"Origin"})}),Object(l.jsx)("td",{children:w(e.origin,"Origin Unknown")})]})}function Y(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("strong",{children:"Author"})}),Object(l.jsx)("td",{children:w(e.author,"Unknown")})]})}function q(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("strong",{children:"Type"})}),Object(l.jsx)("td",{children:w(e.recordType,"Unknown")})]})}function L(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("strong",{children:"Source Archive"})}),Object(l.jsx)("td",{children:w(e.sourceArchive,"Unknown")})]})}function B(e){var t=function(e){return e?e.split(";"):[]}(e.collections);return 0===t.length&&t.push("Collection Unknown"),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("strong",{children:"Collection"})}),Object(l.jsx)("td",{children:t.map((function(e){return Object(l.jsxs)("span",{className:"uk-label",children:[" ",e," "]},e)}))})]})}function E(e){var t=e.record;return Object(l.jsx)("table",{className:"uk-table uk-table-small uk-table-divider uk-margin-medium",children:Object(l.jsxs)("tbody",{children:[Object(l.jsx)(T,{title:t.title}),Object(l.jsx)(P,{title:t.title,attachmentType:t.attachmentType,fileName:t.fileName}),Object(l.jsx)(R,{content:t.content}),Object(l.jsx)(I,{date:t.date}),Object(l.jsx)(D,{origin:t.origin}),Object(l.jsx)(Y,{author:t.author}),Object(l.jsx)(q,{recordType:t.recordType}),Object(l.jsx)(L,{sourceArchive:t.sourceArchive}),Object(l.jsx)(B,{collections:t.collections})]})})}var F=function(e){var t=Object(o.g)().id,c=Object(n.useState)(null),r=Object(u.a)(c,2),s=r[0],a=r[1];return Object(n.useEffect)((function(){(function(e){return fetch("/api/public/records/".concat(e)).then((function(e){return e.json()}))})(t).then(a)}),[t]),s?Object(l.jsx)(E,{record:s}):Object(l.jsx)(C,{})},H=c(13),J=c(19),W=Object(n.createContext)();function M(){return Object(n.useContext)(W)}function V(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),c=t[0],r=t[1];Object(n.useEffect)((function(){fetch("/api/user").then((function(e){return e.json()})).then((function(e){e.username&&r(e)}))}),[]);return{user:c,signin:function(e,t,c){(function(e,t){return N.apply(this,arguments)})(e,t).then((function(e){e.success?r(e.user):c("invalid username/password")}))},signout:function(){(function(){return S.apply(this,arguments)})().then((function(){r(!1)}))}}}function z(e){var t=e.children,c=V();return Object(l.jsx)(W.Provider,{value:c,children:t})}function G(e){var t=e.children,c=Object(J.a)(e,["children"]),n=M();return Object(l.jsx)(o.b,Object(H.a)(Object(H.a)({},c),{},{render:function(){return n.user?t:Object(l.jsx)(o.a,{to:"/"})}}))}function K(e){var t=M(),c=Object(n.useState)(""),r=Object(u.a)(c,2),s=r[0],a=r[1],i=Object(n.useState)(""),j=Object(u.a)(i,2),d=j[0],h=j[1],b=Object(n.useState)(null),O=Object(u.a)(b,2),x=O[0],f=O[1];return console.log(t.user),t.user?Object(l.jsx)(o.a,{to:"/"}):Object(l.jsxs)("form",{className:"uk-form-stacked",onSubmit:function(e){e.preventDefault(),t.signin(s,d,(function(){return f}))},children:[Object(l.jsx)("p",{children:x}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{className:"uk-form-label",children:" Username "}),Object(l.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",name:"username",onChange:function(e){f(null),a(e.target.value)},value:s})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{className:"uk-form-label",children:" Password "}),Object(l.jsx)("input",{className:"uk-form-width-large uk-input",type:"password",name:"password",onChange:function(e){f(null),h(e.target.value)},value:d})]}),Object(l.jsx)("input",{className:"uk-button uk-button-primary",type:"submit",value:"login"})]})}function Q(){return Object(l.jsx)("h1",{children:" Welcome to the Dashboard "})}var X=function(){var e=M(),t=function(e){var t=e.get("offset");if(null===t)return 0;var c=parseInt(t);return isNaN(c)?0:c}(new URLSearchParams(Object(o.f)().search)),c=Object(n.useState)(null),r=Object(u.a)(c,2),s=r[0],a=r[1],d=Object(n.useState)([]),h=Object(u.a)(d,2),x=h[0],f=h[1],p=Object(n.useState)(null),v=Object(u.a)(p,2),g=v[0],k=v[1],N=Object(n.useState)([]),S=Object(u.a)(N,2),w=S[0],C=S[1],T=Object(n.useState)([]),A=Object(u.a)(T,2),P=A[0],R=A[1],U=Object(n.useState)([]),I=Object(u.a)(U,2),D=I[0],Y=I[1],q=Object(n.useState)(!1),L=Object(u.a)(q,2),B=L[0],E=L[1];return Object(n.useEffect)((function(){y({offset:t}).then((function(e){var t=e.records,c=e.pages,n=e.years,r=e.collections,s=e.sourceArchives,i=e.recordTypes;a(t),k(c),f(n),R(r),Y(s),C(i)}))}),[t]),Object(l.jsxs)("div",{className:"uk-marign-top",children:[Object(l.jsxs)("header",{children:[Object(l.jsx)("h1",{children:" History Database "}),Object(l.jsxs)("nav",{className:"uk-navbar",children:[Object(l.jsx)("div",{className:"uk-nav-bar-left",children:Object(l.jsx)("ul",{className:"uk-navbar-nav",children:Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/",children:" Home "})})})}),Object(l.jsx)("div",{className:"uk-navbar-right",children:Object(l.jsx)("ul",{className:"uk-navbar-nav",children:e.user?Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/logout",onClick:function(){e.signout()},children:" Logout "})}):Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/login",children:" Login "})})})})]})]}),Object(l.jsxs)(o.b,{path:"/record/:id",children:[Object(l.jsx)(j,{children:Object(l.jsx)("h1",{className:"uk-text-lead",children:" History Record "})}),Object(l.jsx)(F,{records:s})]}),Object(l.jsx)(o.b,{path:"/login",children:Object(l.jsx)(K,{})}),Object(l.jsx)(G,{path:"/dashboard",children:Object(l.jsx)(Q,{})}),Object(l.jsx)(o.b,{path:"/logout",children:Object(l.jsx)(o.a,{to:"/"})}),Object(l.jsxs)(o.b,{exact:!0,path:"/",children:[Object(l.jsxs)(j,{children:[Object(l.jsx)("h1",{className:"uk-text-lead",children:" History Listing "}),Object(l.jsx)(O,{years:x||[],recordTypes:w,collections:P,sourceArchives:D,onSubmit:function(e){var c=e.query,n=e.searchYear,r=e.searchCollection,s=e.searchSourceArchive,i=e.searchRecordType;y({offset:t,query:c,searchYear:n,searchCollection:r,searchSourceArchive:s,searchRecordType:i}).then((function(e){var t=e.records,c=e.pages,n=e.years;a(t),k(c),f(n),E(!0)}))}}),Object(l.jsx)(b,{currentPage:t||0,pages:g})]}),Object(l.jsx)(m,{searched:B,records:s})]})]})},Z=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,34)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;c(e),n(e),r(e),s(e),a(e)}))};a.a.render(Object(l.jsx)(z,{children:Object(l.jsx)(i.a,{children:Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(X,{})})})}),document.getElementById("root")),Z()}},[[33,1,2]]]);
//# sourceMappingURL=main.10f85746.chunk.js.map