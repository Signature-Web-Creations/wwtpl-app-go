(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,c){},28:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c.n(r),a=c(18),s=c.n(a),i=c(3),u=(c(26),c(2)),o=c(4),l={adminHome:"/admin",home:"/",login:"/login",logout:"/logout",showUsers:"/users",addUser:"/adduser",newRecord:"/record/new",editRecord:{url:"/record/edit",params:{id:":id"}},viewRecord:{url:"/record/view",params:{id:":id"}}};function j(e,t){var c="";if(void 0===(c="string"===typeof l[e]?l[e]:void 0!==t?l[e].url+"/"+t.id:l[e].url+"/"+l[e].params.id))throw new Error("Route doesn't exist: ".concat(e));return c}var d=c(0);function b(e){return Object(d.jsx)("div",{className:"uk-margin-top",children:e.children})}function h(e){if(0===e.currentPage)return null;var t=e.type?e.type:"",c="/".concat(t,"?offset=").concat(e.currentPage-1);return Object(d.jsxs)("a",{href:c,children:[Object(d.jsx)("span",{className:"uk-margin-small-right","uk-pagination-previous":"true"}),"Previous"]})}function O(e){if(e.currentPage>=e.pages)return null;var t=e.type?e.type:"",c="/".concat(t,"?offset=").concat(e.currentPage+1);return Object(d.jsxs)("a",{href:c,children:["Next",Object(d.jsx)("span",{className:"uk-margin-small-left","uk-pagination-next":"true"})]})}function m(e){return null===e.pages?null:Object(d.jsxs)("ul",{className:"uk-pagination uk-margin-large-top",children:[Object(d.jsx)("li",{children:Object(d.jsx)(h,{currentPage:e.currentPage,type:e.type})}),Object(d.jsx)("li",{children:Object(d.jsx)("hr",{className:"uk-divider-vertical",style:{height:"30px",padding:"4px 0",borderWidth:"2px"}})}),Object(d.jsx)("li",{children:Object(d.jsx)(O,{currentPage:e.currentPage,pages:e.pages,type:e.type})})]})}c(28);function p(e){var t=Object(r.useState)(""),c=Object(u.a)(t,2),n=c[0],a=c[1],s=Object(r.useState)(""),i=Object(u.a)(s,2),o=i[0],l=i[1],j=Object(r.useState)(""),b=Object(u.a)(j,2),h=b[0],O=b[1],m=Object(r.useState)(""),p=Object(u.a)(m,2),f=p[0],x=p[1],v=Object(r.useState)(""),k=Object(u.a)(v,2),g=k[0],y=k[1],N=Object(r.useState)(""),S=Object(u.a)(N,2),w=S[0],C=S[1],T=Object(r.useState)(!1),A=Object(u.a)(T,2),R=A[0],U=A[1],I="advancedSearchOptions uk-grid-small ".concat(R?"show":""),P=void 0!==e.user&&"editor"!==e.user.role?"uk-width-1-4@s":"uk-width-1-3@s";return Object(d.jsxs)("form",{className:"uk-margin-large-top",onSubmit:function(t){t.preventDefault(),function(){var t={query:n,searchYear:o,searchCollection:h,searchSourceArchive:f,searchRecordType:g,searchStatus:w};e.onSubmit(t)}()},children:[Object(d.jsxs)("div",{className:"searchBar uk-grid-small","uk-grid":"true",children:[Object(d.jsx)("div",{className:"uk-width-expand@s",children:Object(d.jsx)("input",{className:"uk-input",value:n,type:"text",placeholder:"Search",onChange:function(e){a(e.target.value)}})}),Object(d.jsx)("div",{className:"uk-width-1-3@s",children:Object(d.jsxs)("select",{className:"uk-select",value:o,onChange:function(e){l(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:"Year"}),e.years.map((function(e){return Object(d.jsxs)("option",{value:e,children:[" ",e," "]},e)}))]})}),Object(d.jsxs)("div",{className:"advancedSearchButton uk-width-auto@s uk-grid-small","uk-grid":"true",children:[Object(d.jsx)("div",{className:"uk-width-auto",children:Object(d.jsx)("button",{className:"uk-button uk-button-default","uk-icon":"more","uk-tooltip":"Advanced Search Options",onClick:function(){U(!R)}})}),Object(d.jsx)("div",{className:"uk-width-auto",children:Object(d.jsx)("button",{className:"uk-button uk-button-default",type:"submit","uk-icon":"refresh","uk-tooltip":"Clear Search",onClick:function(){a(""),l(""),O(""),x(""),y(""),C("")}})}),Object(d.jsx)("div",{className:"uk-width-auto",children:Object(d.jsx)("button",{className:"uk-button uk-button-primary searchButton",type:"submit","uk-icon":"search","uk-tooltip":"Search"})})]})]}),Object(d.jsxs)("div",{className:I,"uk-grid":"true",children:[Object(d.jsx)("div",{className:P,children:Object(d.jsxs)("select",{className:"uk-select",value:g,onChange:function(e){y(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:" Type "}),e.recordTypes.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})}),Object(d.jsx)("div",{className:P,children:Object(d.jsxs)("select",{className:"uk-select",value:f,onChange:function(e){x(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:" Source Archive "}),e.sourceArchives.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})}),Object(d.jsx)("div",{className:P,children:Object(d.jsxs)("select",{className:"uk-select",value:h,onChange:function(e){O(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:" Collection "}),e.collections.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})}),void 0!==e.user&&"editor"!==e.user.role&&Object(d.jsx)("div",{className:P,children:Object(d.jsxs)("select",{className:"uk-select",value:w,onChange:function(e){C(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:"Status"}),e.status.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})})]})]})}function f(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.date}),Object(d.jsx)("td",{children:e.title}),Object(d.jsx)("td",{children:e.type}),Object(d.jsx)("td",{children:Object(d.jsxs)(i.b,{to:j("viewRecord",{id:e.id}),className:"uk-button uk-button-primary",children:[" ","View"," "]})})]})}function x(){return Object(d.jsx)("h1",{children:" Your search did not return any results. "})}function v(e){return Object(d.jsxs)("table",{className:"uk-table uk-table-middle uk-table-divider uk-table-hover uk-margin-medium",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{className:"uk-width-small",children:"Date"}),Object(d.jsx)("th",{children:"Title"}),Object(d.jsx)("th",{children:"Type"}),Object(d.jsx)("th",{className:"uk-table-shrink"})]})}),Object(d.jsx)("tbody",{children:e.records.map((function(e){var t=e.id,c=e.date,r=e.title,n=e.recordType;return Object(d.jsx)(f,{id:t,date:c,title:r,type:n.name},t)}))})]})}function k(e){return null===e.records?e.searched?Object(d.jsx)(x,{}):null:Object(d.jsx)(v,{records:e.records})}var g=c(5),y=c.n(g),N=c(10),S=function(e,t){var c=function(e){var t=[];return e.offset&&null!==e.offset&&t.push("offset=".concat(encodeURIComponent(e.offset))),e.query&&""!==e.query&&t.push("query=".concat(encodeURIComponent(e.query))),e.searchYear&&""!==e.searchYear&&t.push("year=".concat(encodeURIComponent(e.searchYear))),e.searchCollection&&""!==e.searchCollection&&t.push("collection=".concat(encodeURIComponent(e.searchCollection))),e.searchSourceArchive&&""!==e.searchSourceArchive&&t.push("sourceArchive=".concat(encodeURIComponent(e.searchSourceArchive))),e.searchRecordType&&""!==e.searchRecordType&&t.push("recordType=".concat(encodeURIComponent(e.searchRecordType))),e.searchRecordStatus&&""!==e.searchRecordStatus&&t.push("recordStatus=".concat(encodeURIComponent(e.searchRecordStatus))),t}(t);return 0!==c.length?e+"?".concat(c.join("&")):e};function w(e){var t=S("/api/records",e);return fetch(t).then((function(e){return e.json()}))}function C(e){var t=S("/api/public/records",e);return fetch(t).then((function(e){return e.json()}))}function T(){return(T=Object(N.a)(y.a.mark((function e(t){var c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/records/".concat(t),{method:"GET",mode:"same-origin",cache:"no-cache",credentials:"include"});case 2:return c=e.sent,e.next=5,c.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(N.a)(y.a.mark((function e(t,c){var r,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:t,password:c},e.next=3,fetch("/api/login",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(N.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/logout",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(N.a)(y.a.mark((function e(t){var c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(N.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users",{method:"GET",mode:"same-origin",cache:"no-cache",credentials:"include"});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(N.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user_roles",{method:"GET",mode:"same-origin",cache:"no-cache"});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(N.a)(y.a.mark((function e(t){var c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/disable",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t})});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(e){var t=new FormData;return t.append("title",e.title),t.append("content",e.content),null!==e.file&&t.append("file",e.file),t.append("date",e.date),t.append("author",e.author),t.append("recordType",e.recordType),t.append("sourceArchive",e.sourceArchive),t.append("collections",e.collections),t.append("recordStatus",e.recordStatus),t};function Y(){return(Y=Object(N.a)(y.a.mark((function e(t){var c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/records",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",body:D(t)});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(N.a)(y.a.mark((function e(t,c){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/records/".concat(t),{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",body:D(c)});case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(N.a)(y.a.mark((function e(t,c){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/records/status/".concat(t),{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({recordId:t,recordStatusId:c})});case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(e,t){return e||t};function H(){return Object(d.jsx)("h1",{children:" Loading "})}function J(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{className:"uk-width-medium",children:Object(d.jsx)("strong",{children:"Title"})}),Object(d.jsx)("td",{children:e.title})]})}function B(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Image"})}),Object(d.jsx)("td",{children:Object(d.jsx)("img",{alt:e.alt,src:"/media/".concat(e.src)})})]})}function G(e){return null===e.attachmentType?null:"image"===e.attachmentType?Object(d.jsx)(B,{alt:e.title,src:e.fileName}):null}function M(e){var t=""===e.content?"No content":e.content;return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Text"})}),Object(d.jsxs)("td",{children:[" ",t," "]})]})}var z=function(e){var t=e.match(/(\d{4})-(\d{2})-(\d{2})/);if(null!==t){var c=t[1],r=t[2],n=t[3];return"".concat(r,"/").concat(n,"/").concat(c)}return e};function V(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Date"})}),Object(d.jsxs)("td",{children:[""===e.date?"Date unknown":z(e.date)," "]})]})}function W(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Origin"})}),Object(d.jsx)("td",{children:F(e.origin,"Origin Unknown")})]})}function _(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Author"})}),Object(d.jsx)("td",{children:F(e.author,"Unknown")})]})}function K(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Type"})}),Object(d.jsx)("td",{children:F(e.recordType.name,"Unknown")})]})}function Q(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Source Archive"})}),Object(d.jsx)("td",{children:F(e.sourceArchive.name,"Unknown")})]})}function X(e){var t=function(e){return e?e.split(";"):[]}(e.collections);return 0===t.length&&t.push("Collection Unknown"),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Collection"})}),Object(d.jsx)("td",{children:t.map((function(e){return Object(d.jsxs)("span",{className:"uk-label",children:[" ",e," "]},e)}))})]})}function Z(e){var t=e.record;return Object(d.jsx)("table",{className:"uk-table uk-table-small uk-table-divider uk-margin-medium",children:Object(d.jsxs)("tbody",{children:[Object(d.jsx)(J,{title:t.title}),Object(d.jsx)(G,{title:t.title,attachmentType:t.attachmentType,fileName:t.fileName}),Object(d.jsx)(M,{content:t.content}),Object(d.jsx)(V,{date:t.date}),Object(d.jsx)(W,{origin:t.origin}),Object(d.jsx)(_,{author:t.author}),Object(d.jsx)(K,{recordType:t.recordType}),Object(d.jsx)(Q,{sourceArchive:t.sourceArchive}),Object(d.jsx)(X,{collections:t.collections})]})})}var $=function(e){var t=Object(o.h)().id,c=Object(r.useState)(null),n=Object(u.a)(c,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){(function(e){return fetch("/api/public/records/".concat(e)).then((function(e){return e.json()}))})(t).then(s)}),[t]),a?Object(d.jsx)(Z,{record:a}):Object(d.jsx)(H,{})},ee=c(16),te=c(21),ce=Object(r.createContext)();function re(){return Object(r.useContext)(ce)}function ne(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),c=t[0],n=t[1];Object(r.useEffect)((function(){fetch("/api/user").then((function(e){return e.json()})).then((function(e){e.username&&n(e)}))}),[]);return{user:c,signin:function(e,t,c){(function(e,t){return A.apply(this,arguments)})(e,t).then((function(e){e.success?n(e.user):c("invalid username/password")}))},signout:function(){n(!1),function(){R.apply(this,arguments)}()}}}function ae(e){var t=e.children,c=ne();return Object(d.jsx)(ce.Provider,{value:c,children:t})}function se(e){var t=e.children,c=Object(te.a)(e,["children"]),r=re();return Object(d.jsx)(o.b,Object(ee.a)(Object(ee.a)({},c),{},{render:function(){return r.user?t:Object(d.jsx)(o.a,{to:"/"})}}))}var ie=function(e){var t="";return t="error"===e.type?"uk-alert-danger":"warning"===e.type?"uk-alert-warning":"uk-alert-success",Object(d.jsxs)("div",{"uk-alert":"true",className:t,children:["warning"!==e.type&&Object(d.jsx)("button",{className:"uk-alert-close","uk-close":"true",onClick:e.onClick}),Object(d.jsx)("p",{children:e.message})]})};function ue(e){var t=re(),c=Object(r.useState)(""),n=Object(u.a)(c,2),a=n[0],s=n[1],i=Object(r.useState)(""),l=Object(u.a)(i,2),j=l[0],b=l[1],h=Object(r.useState)(null),O=Object(u.a)(h,2),m=O[0],p=O[1];return t.user?Object(d.jsx)(o.a,{to:"/dashboard"}):Object(d.jsxs)("form",{className:"uk-form-stacked uk-form-width-large uk-margin-top",onSubmit:function(e){e.preventDefault(),t.signin(a,j,(function(e){return p(e)}))},children:[m&&Object(d.jsx)(ie,{onClick:function(){p(null)},message:m,type:"error"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Username "}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",name:"username",onChange:function(e){p(null),s(e.target.value)},value:a})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Password "}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"password",name:"password",onChange:function(e){p(null),b(e.target.value)},value:j})]}),Object(d.jsx)("input",{className:"uk-button uk-button-primary uk-margin-top",type:"submit",value:"login"})]})}function oe(){return new URLSearchParams(Object(o.g)().search)}var le=function(e){var t,c=re(),r=j("editRecord",{id:e.id});return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)(i.b,{to:r,className:"uk-icon-link uk-margin-small-right","uk-icon":"file-edit"})}),"admin"===c.user.role&&Object(d.jsx)("td",{children:Object(d.jsx)("button",{onClick:function(){},className:"uk-icon-link uk-margin-small-right","uk-icon":"trash"})}),Object(d.jsx)("td",{children:e.date}),Object(d.jsx)("td",{children:e.title}),Object(d.jsx)("td",{children:Object(d.jsx)("span",{className:(t=e.status.name,"unpublished"===t?"uk-label uk-label-warning":"deleted"===t?"uk-label uk-label-error":"uk-label uk-label-success"),children:e.status.name})})]})};function je(){return Object(d.jsx)("h1",{children:" Your search did not return any results. "})}function de(e){return Object(d.jsxs)("table",{className:"uk-table uk-table-middle uk-table-divider uk-table-hover uk-margin-medium",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{className:"uk-table-small"}),void 0!==e.user&&"admin"===e.user.role&&Object(d.jsx)("th",{className:"uk-table-small"}),Object(d.jsx)("th",{className:"uk-width-small",children:"Date"}),Object(d.jsx)("th",{children:"Title"}),Object(d.jsx)("th",{children:"Status"})]})}),Object(d.jsx)("tbody",{children:e.records.map((function(e){var t=e.id,c=e.date,r=e.title,n=e.recordStatus;return Object(d.jsx)(le,{id:t,date:c,title:r,status:n},t)}))})]})}function be(e){return null===e.records?e.searched?Object(d.jsx)(je,{}):null:Object(d.jsx)(de,{records:e.records})}function he(){var e=re(),t=function(e){var t=e.get("offset");if(null===t)return 0;var c=parseInt(t);return isNaN(c)?0:c}(oe()),c=Object(r.useState)(null),n=Object(u.a)(c,2),a=n[0],s=n[1],o=Object(r.useState)([]),l=Object(u.a)(o,2),b=l[0],h=l[1],O=Object(r.useState)(null),f=Object(u.a)(O,2),x=f[0],v=f[1],k=Object(r.useState)([]),g=Object(u.a)(k,2),y=g[0],N=g[1],S=Object(r.useState)([]),C=Object(u.a)(S,2),T=C[0],A=C[1],R=Object(r.useState)([]),U=Object(u.a)(R,2),I=U[0],P=U[1],E=Object(r.useState)([]),D=Object(u.a)(E,2),Y=D[0],q=D[1],L=Object(r.useState)(!1),F=Object(u.a)(L,2),H=F[0],J=F[1];return Object(r.useEffect)((function(){w({offset:t}).then((function(e){var t=e.records,c=e.pages,r=e.years,n=e.collections,a=e.sourceArchives,i=e.recordTypes,u=e.recordStatus;s(t),v(c),h(r),A(n.collections),P(a),N(i),q(u)}))}),[t,e.user]),Object(d.jsxs)(d.Fragment,{children:["admin"===e.user.role&&Object(d.jsxs)(i.b,{to:j("addUser"),className:"uk-button uk-button-primary uk-margin-right",children:[" ","Add New User"," "]}),"admin"===e.user.role&&Object(d.jsxs)(i.b,{to:j("showUsers"),className:"uk-button uk-button-default uk-margin-right",children:[" ","Manage Users"," "]}),Object(d.jsxs)(i.b,{to:j("newRecord"),className:"uk-button uk-button-default",children:[" ","New Record"," "]}),Object(d.jsx)(p,{years:b||[],recordTypes:y,collections:T,sourceArchives:I,status:Y,user:e.user,onSubmit:function(c){if(e.user){var r=c.query,n=c.searchYear,a=c.searchCollection,i=c.searchSourceArchive,u=c.searchRecordType,o=c.searchStatus;w({offset:t,query:r,searchYear:n,searchCollection:a,searchSourceArchive:i,searchRecordType:u,searchStatus:o}).then((function(e){var t=e.records,c=e.pages,r=e.years;s(t),v(c),h(r),J(!0)}))}}}),Object(d.jsx)(m,{currentPage:t||0,pages:x,type:"admin"}),Object(d.jsx)(be,{searched:H,records:a,user:e.user})]})}function Oe(e){return 0===e.trim().length}function me(e){return Object(d.jsxs)("label",{className:"uk-form-danger",children:[" *",e.error," "]})}var pe=function(e){var t=Object(o.h)().id,c=Object(r.useState)(""),n=Object(u.a)(c,2),a=n[0],s=n[1],i=Object(r.useState)(""),l=Object(u.a)(i,2),j=l[0],b=l[1],h=Object(r.useState)(null),O=Object(u.a)(h,2),m=O[0],p=O[1],f=Object(r.useState)(""),x=Object(u.a)(f,2),v=x[0],k=x[1],g=Object(r.useState)(""),y=Object(u.a)(g,2),N=y[0],S=y[1],w=Object(r.useState)(""),C=Object(u.a)(w,2),A=C[0],R=C[1],U=Object(r.useState)(""),I=Object(u.a)(U,2),P=I[0],E=I[1],D=Object(r.useState)(""),F=Object(u.a)(D,2),H=F[0],J=F[1],B=Object(r.useState)([]),G=Object(u.a)(B,2),M=G[0],z=G[1],V=Object(r.useState)(null),W=Object(u.a)(V,2),_=W[0],K=W[1],Q=void 0===t,X=Object(r.useState)({message:null,type:null}),Z=Object(u.a)(X,2),$=Z[0],ee=Z[1],te=Object(r.useState)({title:null,date:null,recordType:null,sourceArchive:null,collections:null}),ce=Object(u.a)(te,2),re=ce[0],ne=ce[1],ae=function(e){if(void 0===re[e])throw new Error("Cannot create helper function for unknown field: ".concat(e));return function(){if(re[e]){var t={};t[e]=null,ne(Object.assign(re,t))}}},se=ae("title"),ue=ae("date"),oe=ae("recordType"),le=ae("sourceArchive"),je=ae("collections"),de=function(){var e=!0,t={};return Oe(a)&&(t.title="Title is required",e=!1),t.date=Oe(v)?"Date is required.":null,e=e&&null===t.date,""===P&&(t.recordType="You need to select a record type",e=!1),""===H&&(t.sourceArchive="You need to select a source archive",e=!1),0===M.length&&(t.collections="You need to select at least one collection"),ne(Object.assign(re,t)),e};Object(r.useEffect)((function(){Q||function(e){return T.apply(this,arguments)}(t).then((function(c){if(c.record){var r=c.record;s(r.title),b(r.content),k(r.date),S(r.origin),R(r.author),null!==r.recordType&&E(r.recordType.id),null!==r.sourceArchive&&J(r.sourceArchive.id),3===r.recordStatus.id?(!function(e,t){L.apply(this,arguments)}(t,4),K(4)):K(r.recordStatus.id);var n=[];r.collections.split(";").forEach((function(t){e.collectionToId[t]&&n.push(e.collectionToId[t])})),z(n)}}))}),[Q,t,e.collectionToId]);var be=function(e){var t=parseInt(e);if(isNaN(t))throw new Error("Couldn't parse int on string: ".concat(e));return t},he=function(e){if(de()){var c={title:a.trim(),content:j.trim(),file:m,date:v.trim(),origin:N.trim(),author:A.trim(),recordType:be(P),sourceArchive:be(H),collections:M.map(be),recordStatus:null===e?1:e};Q?function(e){return Y.apply(this,arguments)}(c).then((function(e){e.error?ee({message:e.error,type:"error"}):(s(""),b(""),k(""),S(""),R(""),E(""),J(""),z([]),ee({message:e.success,type:"success"}))})):function(e,t){return q.apply(this,arguments)}(be(t),c).then((function(e){e.error?ee({message:e.error,type:"error"}):ee({message:e.success,type:"success"})}))}else ee({message:"Please fill out required fields correctly",type:"error"})},pe=Q?"New Record":"Edit Record";return Object(d.jsxs)("form",{className:"uk-form-horizontal uk-margin-large uk-margin-top",encType:"multipart/form-data",onSubmit:he,children:[$.message&&Object(d.jsx)(ie,{onChange:function(){ee({message:null,type:null})},message:$.message,type:$.type}),"unpublished"===_&&Object(d.jsx)(ie,{message:"The record has been unpublished while in edit mode!",type:"warning"}),Object(d.jsxs)("h1",{children:[" ",pe," "]}),Object(d.jsxs)("div",{className:"uk-margin",children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Title "}),Object(d.jsx)("div",{className:"uk-form-controls",children:Object(d.jsx)("input",{className:"uk-form-width-large uk-input "+(re.title&&"uk-form-danger"),type:"text",value:a,onChange:function(e){se(),s(e.target.value)}})})]}),Object(d.jsxs)("div",{className:"uk-margin",children:[Object(d.jsx)("label",{htmlFor:"file",className:"uk-form-label",children:" Image "}),Object(d.jsx)("div",{className:"uk-form-controls",children:Object(d.jsx)("input",{type:"file",name:"file",accept:".jpg, .jpeg, .png",onChange:function(e){p(e.target.files[0])}})})]}),Object(d.jsxs)("div",{className:"uk-margin",children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Content "}),Object(d.jsx)("div",{className:"uk-form-controls",children:Object(d.jsx)("textarea",{className:"uk-form-width-large uk-textarea",value:j,onChange:function(e){b(e.target.value)}})})]}),Object(d.jsxs)("div",{className:"uk-margin",children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Date "}),Object(d.jsx)("div",{className:"uk-form-controls",children:Object(d.jsx)("input",{className:"uk-form-width-large uk-input "+(re.date&&"uk-form-danger"),type:"date",value:v,onChange:function(e){ue(),k(e.target.value)}})})]}),Object(d.jsxs)("div",{className:"uk-margin",children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Origin "}),Object(d.jsx)("div",{className:"uk-form-controls",children:Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",value:N,onChange:function(e){S(e.target.value)}})})]}),Object(d.jsxs)("div",{className:"uk-margin",children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Author "}),Object(d.jsx)("div",{className:"uk-form-controls",children:Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",value:A,onChange:function(e){R(e.target.value)}})})]}),Object(d.jsxs)("div",{className:"uk-margin",children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Record Type "}),Object(d.jsx)("div",{className:"uk-form-controls",children:Object(d.jsxs)("select",{className:"uk-form-width-large uk-select "+(re.recordType&&"uk-form-danger"),value:P,onChange:function(e){oe(),E(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:" No Record Type "}),e.recordTypes.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})})]}),Object(d.jsxs)("div",{className:"uk-margin",children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Source Archive "}),Object(d.jsx)("div",{className:"uk-form-controls",children:Object(d.jsxs)("select",{className:"uk-form-width-large uk-select "+(re.sourceArchive&&"uk-form-danger"),value:H,onChange:function(e){le(),J(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:" No Source Archive "}),e.sourceArchives.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})})]}),Object(d.jsxs)("div",{className:"uk-margin",children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Collections "}),Object(d.jsxs)("div",{className:"uk-form-controls uk-form-controls-text",children:[Object(d.jsx)("div",{children:re.collections&&Object(d.jsx)(me,{error:re.collections})}),Object(d.jsx)("div",{className:"uk-grid-small uk-child-width-1-2 uk-grid",children:e.collections.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{className:"uk-checkbox",type:"checkbox",name:"collections",value:t,checked:M.includes(t),onChange:function(){je(),function(e){M.includes(e)?z(M.filter((function(t){return t!==e}))):z(M.concat(e))}(t)}},t),"\xa0\xa0 ",c]},t)}))})]})]}),Object(d.jsxs)("div",{className:"uk-form-width-large",children:[Object(d.jsx)("input",{className:"uk-button uk-button-default uk-margin-top uk-margin-right",onClick:function(){he(_)},type:"button",value:"Save"}),!Q&&1!==_&&Object(d.jsx)("input",{className:"uk-button uk-button-primary uk-margin-top",onClick:function(){he(3)},type:"button",value:"Save & Publish"}),(Q||1===_)&&Object(d.jsx)("input",{className:"uk-button uk-button-primary uk-margin-top",onClick:function(){he(2)},type:"button",value:"Submit for Approval"})]})]})};var fe=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(""),s=Object(u.a)(a,2),i=s[0],o=s[1],l=Object(r.useState)(""),j=Object(u.a)(l,2),b=j[0],h=j[1],O=Object(r.useState)(""),m=Object(u.a)(O,2),p=m[0],f=m[1],x=Object(r.useState)(1),v=Object(u.a)(x,2),k=v[0],g=v[1],y=Object(r.useState)([]),N=Object(u.a)(y,2),S=N[0],w=N[1],C=Object(r.useState)(null),T=Object(u.a)(C,2),A=T[0],R=T[1],I=Object(r.useState)(null),E=Object(u.a)(I,2),D=E[0],Y=E[1];return Object(r.useEffect)((function(){(function(){return P.apply(this,arguments)})().then((function(e){e.roles&&w(e.roles)}))}),[]),Object(d.jsxs)("form",{className:"uk-form-stacked uk-form-width-large uk-margin-top",onSubmit:function(e){e.preventDefault(),function(e){return U.apply(this,arguments)}({firstName:c,lastName:i,username:b,password:p,roleId:k}).then((function(e){e.success?(Y(e.success),n(""),o(""),h(""),f(""),g(1)):R(e.error)}))},children:[D&&Object(d.jsx)(ie,{onClick:function(){Y(null)},message:D,type:"success"}),A&&Object(d.jsx)(ie,{onClick:function(){R(null)},message:A,type:"error"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label uk-margin-top",children:"First Name"}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",name:"firstName",onChange:function(e){n(e.target.value)},value:c})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label uk-margin-top",children:"Last Name"}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",name:"lastName",onChange:function(e){o(e.target.value),h(c.charAt(0).toLowerCase()+e.target.value.toLowerCase())},value:i})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label uk-margin-top",children:"Username"}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",name:"username",onChange:function(e){h(e.target.value)},value:b})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label uk-margin-top",children:"Password"}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"password",name:"password",onChange:function(e){f(e.target.value)},value:p})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label uk-margin-top",children:"Role"}),Object(d.jsx)("select",{className:"uk-select",value:k,onChange:function(e){var t=parseInt(e.target.value);isNaN(t)?g(1):g(t)},children:0!==S.length&&S.map((function(e){var t,c=e.id,r=e.name;return Object(d.jsxs)("option",{value:c,children:[" ",(t=r,t.length>0?t[0].toUpperCase()+t.slice(1):t)," "]},c)}))})]}),Object(d.jsx)("input",{className:"uk-button uk-button-primary uk-margin-top",type:"submit",value:"Create User"})]})};function xe(e){var t=e.id,c=e.firstName,r=e.lastName,n=e.username,a=e.role;return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)(i.b,{to:"/editUser/".concat(t),className:"uk-icon-link uk-margin-small-right","uk-icon":"file-edit"})}),Object(d.jsx)("td",{children:Object(d.jsx)(i.b,{onClick:function(e){e.preventDefault();var c=parseInt(t);isNaN(c)&&console.log("Id was not a number"),function(e){return E.apply(this,arguments)}(t).then((function(e){e.error?console.log(e.error):console.log(e.success)}))},className:"uk-icon-link uk-margin-small-right","uk-icon":"trash"})}),Object(d.jsx)("td",{children:r}),Object(d.jsx)("td",{children:c}),Object(d.jsx)("td",{children:n}),Object(d.jsx)("td",{children:a})]})}function ve(e){var t=Object(r.useState)([]),c=Object(u.a)(t,2),n=c[0],a=c[1];return Object(r.useEffect)((function(){(function(){return I.apply(this,arguments)})().then((function(e){e.users&&a(e.users)}))}),[]),Object(d.jsxs)("table",{className:"uk-table uk-table-middle uk-table-divider uk-table-hover uk-margin-medium",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{className:"uk-table-small"}),Object(d.jsx)("th",{className:"uk-table-small"}),Object(d.jsx)("th",{className:"uk-width-small",children:"Last Name"}),Object(d.jsx)("th",{children:"First Name"}),Object(d.jsx)("th",{children:"Username"}),Object(d.jsx)("th",{children:"Role"})]})}),Object(d.jsx)("tbody",{children:n.map((function(e){var t=e.id,c=e.firstName,r=e.lastName,n=e.username,a=e.role;return Object(d.jsx)(xe,{id:t,firstName:c,lastName:r,username:n,role:a})}))})]})}var ke=function(){var e=re(),t=function(e){var t=e.get("offset");if(null===t)return 0;var c=parseInt(t);return isNaN(c)?0:c}(oe()),c=Object(r.useState)(null),n=Object(u.a)(c,2),a=n[0],s=n[1],l=Object(r.useState)([]),h=Object(u.a)(l,2),O=h[0],f=h[1],x=Object(r.useState)(null),v=Object(u.a)(x,2),g=v[0],y=v[1],N=Object(r.useState)([]),S=Object(u.a)(N,2),w=S[0],T=S[1],A=Object(r.useState)([]),R=Object(u.a)(A,2),U=R[0],I=R[1],P=Object(r.useState)({}),E=Object(u.a)(P,2),D=E[0],Y=E[1],q=Object(r.useState)([]),L=Object(u.a)(q,2),F=L[0],H=L[1],J=Object(r.useState)([]),B=Object(u.a)(J,2),G=B[0],M=B[1],z=Object(r.useState)(!1),V=Object(u.a)(z,2),W=V[0],_=V[1];return Object(r.useEffect)((function(){C({offset:t}).then((function(e){var t=e.records,c=e.pages,r=e.years,n=e.collections,a=e.sourceArchives,i=e.recordTypes,u=e.recordStatus;s(t),y(c),f(r),I(n.collections),Y(n.collectionToId),H(a),T(i),M(u)}))}),[t]),Object(d.jsxs)("div",{className:"uk-marign-top",children:[Object(d.jsxs)("header",{children:[Object(d.jsx)("h1",{children:" History Database "}),Object(d.jsxs)("nav",{className:"uk-navbar",children:[Object(d.jsx)("div",{className:"uk-nav-bar-left",children:Object(d.jsx)("ul",{className:"uk-navbar-nav",children:e.user?Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{to:j("adminHome"),children:" Dashboard "})}):Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{to:j("home"),children:" Home "})})})}),Object(d.jsx)("div",{className:"uk-navbar-right",children:Object(d.jsx)("ul",{className:"uk-navbar-nav",children:e.user?Object(d.jsx)("li",{children:Object(d.jsxs)(i.b,{to:j("logout"),onClick:function(){e.signout()},children:[" ","Logout"," "]})}):Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{to:j("login"),children:" Login "})})})})]})]}),Object(d.jsxs)(o.d,{children:[Object(d.jsxs)(o.b,{path:j("viewRecord"),children:[Object(d.jsx)(b,{children:Object(d.jsx)("h1",{className:"uk-text-lead",children:" History Record "})}),Object(d.jsx)($,{records:a})]}),Object(d.jsx)(o.b,{path:j("login"),children:Object(d.jsx)(ue,{})}),Object(d.jsx)(se,{path:j("newRecord"),children:Object(d.jsx)(pe,{recordTypes:w,collections:U,sourceArchives:F,recordStatus:G,buttonText:"Add"})}),Object(d.jsx)(se,{path:j("editRecord"),children:Object(d.jsx)(pe,{recordTypes:w,collections:U,sourceArchives:F,recordStatus:G,collectionToId:D,buttonText:"Update"})}),Object(d.jsx)(se,{path:j("adminHome"),children:Object(d.jsx)(he,{records:a})}),Object(d.jsx)(se,{path:j("addUser"),children:Object(d.jsx)(fe,{})}),Object(d.jsx)(se,{path:j("showUsers"),children:Object(d.jsx)(ve,{})}),Object(d.jsx)(o.b,{path:j("logout"),children:Object(d.jsx)(o.a,{to:j("home")})}),e.user?Object(d.jsx)(o.b,{path:j("home"),children:Object(d.jsx)(o.a,{to:j("adminHome")})}):Object(d.jsxs)(o.b,{exact:!0,path:j("home"),children:[Object(d.jsxs)(b,{children:[Object(d.jsx)("h1",{className:"uk-text-lead",children:" History Listing "}),Object(d.jsx)(p,{years:O||[],recordTypes:w,collections:U,sourceArchives:F,onSubmit:function(e){var c=e.query,r=e.searchYear,n=e.searchCollection,a=e.searchSourceArchive,i=e.searchRecordType;C({offset:t,query:c,searchYear:r,searchCollection:n,searchSourceArchive:a,searchRecordType:i}).then((function(e){var t=e.records,c=e.pages,r=e.years;s(t),y(c),f(r),_(!0)}))}}),Object(d.jsx)(m,{currentPage:t||0,pages:g})]}),Object(d.jsx)(k,{searched:W,records:a})]})]})]})},ge=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,36)).then((function(t){var c=t.getCLS,r=t.getFID,n=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),r(e),n(e),a(e),s(e)}))};s.a.render(Object(d.jsx)(ae,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(ke,{})})})}),document.getElementById("root")),ge()}},[[35,1,2]]]);
//# sourceMappingURL=main.02a92e5b.chunk.js.map