(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t,c){},30:function(e,t,c){},38:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c.n(r),s=c(19),a=c.n(s),i=c(3),u=(c(28),c(2)),o=c(4),l={adminHome:"/admin",home:"/",login:"/login",logout:"/logout",showUsers:"/users",addUser:"/adduser",newRecord:"/record/new",editRecord:{url:"/record/edit",params:{id:":id"}},viewRecord:{url:"/record/view",params:{id:":id"}}};function j(e,t){var c="";if(void 0===(c="string"===typeof l[e]?l[e]:void 0!==t?l[e].url+"/"+t.id:l[e].url+"/"+l[e].params.id))throw new Error("Route doesn't exist: ".concat(e));return c}var d=c(0);function b(e){return Object(d.jsx)("div",{className:"uk-margin-top",children:e.children})}function h(e){if(0===e.currentPage)return null;var t="/?offset=".concat(e.currentPage-1);return Object(d.jsxs)("a",{href:t,children:[Object(d.jsx)("span",{className:"uk-margin-small-right","uk-pagination-previous":"true"}),"Previous"]})}function O(e){if(e.currentPage>=e.pages)return null;var t="/?offset=".concat(e.currentPage+1);return Object(d.jsxs)("a",{href:t,children:["Next",Object(d.jsx)("span",{className:"uk-margin-small-left","uk-pagination-next":"true"})]})}function m(e){return null===e.pages?null:Object(d.jsxs)("ul",{className:"uk-pagination uk-margin-large-top",children:[Object(d.jsx)("li",{children:Object(d.jsx)(h,{currentPage:e.currentPage})}),Object(d.jsx)("li",{children:Object(d.jsx)("hr",{className:"uk-divider-vertical",style:{height:"30px",padding:"4px 0",borderWidth:"2px"}})}),Object(d.jsx)("li",{children:Object(d.jsx)(O,{currentPage:e.currentPage,pages:e.pages})})]})}c(30);function x(e){var t=Object(r.useState)(""),c=Object(u.a)(t,2),n=c[0],s=c[1],a=Object(r.useState)(""),i=Object(u.a)(a,2),o=i[0],l=i[1],j=Object(r.useState)(""),b=Object(u.a)(j,2),h=b[0],O=b[1],m=Object(r.useState)(""),x=Object(u.a)(m,2),p=x[0],f=x[1],v=Object(r.useState)(""),k=Object(u.a)(v,2),g=k[0],N=k[1],y=Object(r.useState)(""),S=Object(u.a)(y,2),w=S[0],C=S[1],T=Object(r.useState)(!1),R=Object(u.a)(T,2),A=R[0],U=R[1],I="advancedSearchOptions uk-grid-small ".concat(A?"show":""),P=e.isLoggedIn?"uk-width-1-4@s":"uk-width-1-3@s";return Object(d.jsxs)("form",{className:"uk-margin-top",onSubmit:function(t){t.preventDefault(),function(){var t={query:n,searchYear:o,searchCollection:h,searchSourceArchive:p,searchRecordType:g,searchStatus:w};e.onSubmit(t)}()},children:[Object(d.jsxs)("div",{className:"searchBar uk-grid-small","uk-grid":"true",children:[Object(d.jsx)("div",{className:"uk-width-expand@s",children:Object(d.jsx)("input",{className:"uk-input",value:n,type:"text",placeholder:"Search",onChange:function(e){s(e.target.value)}})}),Object(d.jsx)("div",{className:"uk-width-1-3@s",children:Object(d.jsxs)("select",{className:"uk-select",value:o,onChange:function(e){l(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:"Year"}),e.years.map((function(e){return Object(d.jsxs)("option",{value:e,children:[" ",e," "]},e)}))]})}),Object(d.jsxs)("div",{className:"advancedSearchButton uk-width-auto@s uk-grid-small","uk-grid":"true",children:[Object(d.jsx)("div",{className:"uk-width-auto",children:Object(d.jsx)("button",{className:"uk-button uk-button-default","uk-icon":"more","uk-tooltip":"Advanced Search Options",onClick:function(){U(!A)}})}),Object(d.jsx)("div",{className:"uk-width-auto",children:Object(d.jsx)("button",{className:"uk-button uk-button-default",type:"submit","uk-icon":"refresh","uk-tooltip":"Clear Search",onClick:function(){s(""),l(""),O(""),f(""),N(""),C("")}})}),Object(d.jsx)("div",{className:"uk-width-auto",children:Object(d.jsx)("button",{className:"uk-button uk-button-primary searchButton",type:"submit","uk-icon":"search","uk-tooltip":"Search"})})]})]}),Object(d.jsxs)("div",{className:I,"uk-grid":"true",children:[Object(d.jsx)("div",{className:P,children:Object(d.jsxs)("select",{className:"uk-select",value:g,onChange:function(e){N(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:" Type "}),e.recordTypes.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})}),Object(d.jsx)("div",{className:P,children:Object(d.jsxs)("select",{className:"uk-select",value:p,onChange:function(e){f(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:" Source Archive "}),e.sourceArchives.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})}),Object(d.jsx)("div",{className:P,children:Object(d.jsxs)("select",{className:"uk-select",value:h,onChange:function(e){O(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:" Collection "}),e.collections.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})}),e.isLoggedIn&&Object(d.jsx)("div",{className:P,children:Object(d.jsxs)("select",{className:"uk-select",value:w,onChange:function(e){C(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:"Status"}),e.status.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})})]})]})}function p(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.date}),Object(d.jsx)("td",{children:e.title}),Object(d.jsx)("td",{children:e.type}),Object(d.jsx)("td",{children:Object(d.jsxs)(i.b,{to:j("viewRecord",{id:e.id}),className:"uk-button uk-button-primary",children:[" ","View"," "]})})]})}function f(){return Object(d.jsx)("h1",{children:" Your search did not return any results. "})}function v(e){return Object(d.jsxs)("table",{className:"uk-table uk-table-middle uk-table-divider uk-table-hover uk-margin-medium",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{className:"uk-width-small",children:"Date"}),Object(d.jsx)("th",{children:"Title"}),Object(d.jsx)("th",{children:"Type"}),Object(d.jsx)("th",{className:"uk-table-shrink"})]})}),Object(d.jsx)("tbody",{children:e.records.map((function(e){var t=e.id,c=e.date,r=e.title,n=e.recordType;return Object(d.jsx)(p,{id:t,date:c,title:r,type:n},t)}))})]})}function k(e){return null===e.records?e.searched?Object(d.jsx)(f,{}):null:Object(d.jsx)(v,{records:e.records})}var g=c(6),N=c.n(g),y=c(10);function S(e){var t,c=[],r="/api/public/records";return e.offset&&null!==e.offset&&c.push("offset=".concat(encodeURIComponent(e.offset))),e.query&&""!==e.query&&c.push("query=".concat(encodeURIComponent(e.query))),e.searchYear&&""!==e.searchYear&&c.push("year=".concat(encodeURIComponent(e.searchYear))),e.searchCollection&&""!==e.searchCollection&&c.push("collection=".concat(encodeURIComponent(e.searchCollection))),e.searchSourceArchive&&""!==e.searchSourceArchive&&c.push("sourceArchive=".concat(encodeURIComponent(e.searchSourceArchive))),e.searchRecordType&&""!==e.searchRecordType&&c.push("recordType=".concat(encodeURIComponent(e.searchRecordType))),e.searchRecordStatus&&""!==e.searchRecordStatus&&c.push("recordStatus=".concat(encodeURIComponent(e.searchRecordStatus))),t=0!==c.length?r+"?".concat(c.join("&")):r,fetch(t).then((function(e){return e.json()}))}function w(){return(w=Object(y.a)(N.a.mark((function e(t){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/records/".concat(t),{method:"GET",mode:"same-origin",cache:"no-cache",credentials:"include"});case 2:return c=e.sent,e.next=5,c.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(y.a)(N.a.mark((function e(t,c){var r,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:t,password:c},e.next=3,fetch("/api/login",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(y.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/logout",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(y.a)(N.a.mark((function e(t){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(y.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users",{method:"GET",mode:"same-origin",cache:"no-cache",credentials:"include"});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(y.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user_roles",{method:"GET",mode:"same-origin",cache:"no-cache"});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(y.a)(N.a.mark((function e(t){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/disable",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t})});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(y.a)(N.a.mark((function e(t){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/records",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(e,t){return e||t};function E(){return Object(d.jsx)("h1",{children:" Loading "})}function L(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{className:"uk-width-medium",children:Object(d.jsx)("strong",{children:"Title"})}),Object(d.jsx)("td",{children:e.title})]})}function q(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Image"})}),Object(d.jsx)("td",{children:Object(d.jsx)("img",{alt:e.alt,src:"/media/".concat(e.src)})})]})}function H(e){return null===e.attachmentType?null:"image"===e.attachmentType?Object(d.jsx)(q,{alt:e.title,src:e.fileName}):null}function F(e){var t=""===e.content?"No content":e.content;return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Text"})}),Object(d.jsxs)("td",{children:[" ",t," "]})]})}var B=function(e){var t=e.match(/(\d{4})-(\d{2})-(\d{2})/);if(null!==t){var c=t[1],r=t[2],n=t[3];return"".concat(r,"/").concat(n,"/").concat(c)}return e};function J(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Date"})}),Object(d.jsxs)("td",{children:[""===e.date?"Date unknown":B(e.date)," "]})]})}function M(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Origin"})}),Object(d.jsx)("td",{children:D(e.origin,"Origin Unknown")})]})}function G(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Author"})}),Object(d.jsx)("td",{children:D(e.author,"Unknown")})]})}function V(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Type"})}),Object(d.jsx)("td",{children:D(e.recordType,"Unknown")})]})}function W(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Source Archive"})}),Object(d.jsx)("td",{children:D(e.sourceArchive,"Unknown")})]})}function _(e){var t=function(e){return e?e.split(";"):[]}(e.collections);return 0===t.length&&t.push("Collection Unknown"),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("strong",{children:"Collection"})}),Object(d.jsx)("td",{children:t.map((function(e){return Object(d.jsxs)("span",{className:"uk-label",children:[" ",e," "]},e)}))})]})}function z(e){var t=e.record;return Object(d.jsx)("table",{className:"uk-table uk-table-small uk-table-divider uk-margin-medium",children:Object(d.jsxs)("tbody",{children:[Object(d.jsx)(L,{title:t.title}),Object(d.jsx)(H,{title:t.title,attachmentType:t.attachmentType,fileName:t.fileName}),Object(d.jsx)(F,{content:t.content}),Object(d.jsx)(J,{date:t.date}),Object(d.jsx)(M,{origin:t.origin}),Object(d.jsx)(G,{author:t.author}),Object(d.jsx)(V,{recordType:t.recordType}),Object(d.jsx)(W,{sourceArchive:t.sourceArchive}),Object(d.jsx)(_,{collections:t.collections})]})})}var K=function(e){var t=Object(o.h)().id,c=Object(r.useState)(null),n=Object(u.a)(c,2),s=n[0],a=n[1];return Object(r.useEffect)((function(){(function(e){return fetch("/api/public/records/".concat(e)).then((function(e){return e.json()}))})(t).then(a)}),[t]),s?Object(d.jsx)(z,{record:s}):Object(d.jsx)(E,{})},Q=c(17),X=c(23),Z=Object(r.createContext)();function $(){return Object(r.useContext)(Z)}function ee(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),c=t[0],n=t[1];Object(r.useEffect)((function(){fetch("/api/user").then((function(e){return e.json()})).then((function(e){e.username&&n(e)}))}),[]);return{user:c,signin:function(e,t,c){(function(e,t){return C.apply(this,arguments)})(e,t).then((function(e){e.success?n(e.user):c("invalid username/password")}))},signout:function(){(function(){return T.apply(this,arguments)})().then((function(){n(!1)}))}}}function te(e){var t=e.children,c=ee();return Object(d.jsx)(Z.Provider,{value:c,children:t})}function ce(e){var t=e.children,c=Object(X.a)(e,["children"]),r=$();return Object(d.jsx)(o.b,Object(Q.a)(Object(Q.a)({},c),{},{render:function(){return r.user?t:Object(d.jsx)(o.a,{to:"/"})}}))}function re(e){var t=$(),c=Object(r.useState)(""),n=Object(u.a)(c,2),s=n[0],a=n[1],l=Object(r.useState)(""),j=Object(u.a)(l,2),b=j[0],h=j[1],O=Object(r.useState)(null),m=Object(u.a)(O,2),x=m[0],p=m[1],f=function(){};function v(){return Object(d.jsxs)("div",{"uk-alert":!0,className:"uk-alert-danger",children:[Object(d.jsx)(i.b,{className:"uk-alert-close","uk-close":!0,onClick:f}),Object(d.jsx)("p",{children:x})]})}return t.user?Object(d.jsx)(o.a,{to:"/dashboard"}):Object(d.jsxs)("form",{className:"uk-form-stacked uk-form-width-large uk-margin-top",onSubmit:function(e){e.preventDefault(),t.signin(s,b,(function(){return p}))},children:[x&&Object(d.jsx)(v,{}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Username "}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",name:"username",onChange:function(e){p(null),a(e.target.value)},value:s})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Password "}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"password",name:"password",onChange:function(e){p(null),h(e.target.value)},value:b})]}),Object(d.jsx)("input",{className:"uk-button uk-button-primary uk-margin-top",type:"submit",value:"login"})]})}function ne(){return new URLSearchParams(Object(o.g)().search)}var se=function(e){var t,c=j("editRecord",{id:e.id});return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)(i.b,{to:c,className:"uk-icon-link uk-margin-small-right","uk-icon":"file-edit"})}),Object(d.jsx)("td",{children:Object(d.jsx)("button",{onClick:function(){},className:"uk-icon-link uk-margin-small-right","uk-icon":"trash"})}),Object(d.jsx)("td",{children:e.date}),Object(d.jsx)("td",{children:e.title}),Object(d.jsx)("td",{children:Object(d.jsx)("span",{className:(t=e.status,"unpublished"===t?"uk-label uk-label-warning":"deleted"===t?"uk-label uk-label-error":"uk-label uk-label-success"),children:e.status})})]})};function ae(){return Object(d.jsx)("h1",{children:" Your search did not return any results. "})}function ie(e){return Object(d.jsxs)("table",{className:"uk-table uk-table-middle uk-table-divider uk-table-hover uk-margin-medium",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{className:"uk-table-small"}),Object(d.jsx)("th",{className:"uk-table-small"}),Object(d.jsx)("th",{className:"uk-width-small",children:"Date"}),Object(d.jsx)("th",{children:"Title"}),Object(d.jsx)("th",{children:"Status"})]})}),Object(d.jsx)("tbody",{children:e.records.map((function(e){var t=e.id,c=e.date,r=e.title,n=e.recordStatus;return Object(d.jsx)(se,{id:t,date:c,title:r,status:n},t)}))})]})}function ue(e){return null===e.records?e.searched?Object(d.jsx)(ae,{}):null:Object(d.jsx)(ie,{records:e.records})}function oe(){var e=$(),t=function(e){var t=e.get("offset");if(null===t)return 0;var c=parseInt(t);return isNaN(c)?0:c}(ne()),c=Object(r.useState)(null),n=Object(u.a)(c,2),s=n[0],a=n[1],o=Object(r.useState)([]),l=Object(u.a)(o,2),b=l[0],h=l[1],O=Object(r.useState)(null),p=Object(u.a)(O,2),f=p[0],v=p[1],k=Object(r.useState)(null),g=Object(u.a)(k,2),N=(g[0],g[1]),y=Object(r.useState)([]),w=Object(u.a)(y,2),C=w[0],T=w[1],R=Object(r.useState)([]),A=Object(u.a)(R,2),U=A[0],I=A[1],P=Object(r.useState)([]),Y=Object(u.a)(P,2),D=Y[0],E=Y[1],L=Object(r.useState)([]),q=Object(u.a)(L,2),H=q[0],F=q[1],B=Object(r.useState)(!1),J=Object(u.a)(B,2),M=J[0],G=J[1];return Object(r.useEffect)((function(){S({offset:t}).then((function(e){var t=e.records,c=e.pages,r=e.years,n=e.status,s=e.collections,i=e.sourceArchives,u=e.recordTypes,o=e.recordStatus;a(t),v(c),h(r),N(n),I(s.collections),E(i),T(u),F(o)}))}),[t]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(i.b,{to:j("addUser"),className:"uk-button uk-button-primary uk-margin-right",children:[" ","Add New User"," "]}),Object(d.jsxs)(i.b,{to:j("showUsers"),className:"uk-button uk-button-default",children:[" ","Manage Users"," "]}),Object(d.jsxs)(i.b,{to:j("newRecord"),className:"uk-button uk-button-default",children:[" ","New Record"," "]}),Object(d.jsx)(x,{years:b||[],recordTypes:C,collections:U,sourceArchives:D,status:H,isLoggedIn:e.user,onSubmit:function(e){var c=e.query,r=e.searchYear,n=e.searchCollection,s=e.searchSourceArchive,i=e.searchRecordType,u=e.searchStatus;S({offset:t,query:c,searchYear:r,searchCollection:n,searchSourceArchive:s,searchRecordType:i,searchStatus:u}).then((function(e){var t=e.records,c=e.pages,r=e.years,n=e.status;a(t),v(c),h(r),N(n),G(!0)}))}}),Object(d.jsx)(m,{currentPage:t||0,pages:f}),Object(d.jsx)(ue,{searched:M,records:s})]})}var le=c(13),je=c(22),de=c.n(je);var be=function(e){var t="";return t="error"===e.type?"uk-alert-danger":"uk-alert-success",Object(d.jsxs)("div",{"uk-alert":"true",className:t,children:[Object(d.jsx)(i.b,{className:"uk-alert-close","uk-close":"true",onClick:function(){e.handleCloseBox(null)}}),Object(d.jsx)("p",{children:e.message})]})};function he(e){return 0===e.trim().length}function Oe(e){return e.error?Object(d.jsxs)("p",{children:[" ",e.error," "]}):null}var me=function(e){var t=Object(o.h)().id,c=Object(r.useState)(""),n=Object(u.a)(c,2),s=n[0],a=n[1],i=Object(r.useState)(""),l=Object(u.a)(i,2),j=l[0],b=l[1],h=Object(r.useState)(""),O=Object(u.a)(h,2),m=O[0],x=O[1],p=Object(r.useState)(""),f=Object(u.a)(p,2),v=f[0],k=f[1],g=Object(r.useState)(""),N=Object(u.a)(g,2),y=N[0],S=N[1],C=Object(r.useState)(""),T=Object(u.a)(C,2),R=T[0],A=T[1],U=Object(r.useState)(""),I=Object(u.a)(U,2),Y=I[0],D=I[1],E=Object(r.useState)([]),L=Object(u.a)(E,2),q=L[0],H=L[1],F=Object(r.useState)({title:!1,date:!1,recordType:!1,sourceArchive:!1,collections:!1}),B=Object(u.a)(F,2),J=B[0],M=B[1],G=function(e){if(void 0===J[e])throw new Error("Cannot create helper function for unknown field: ".concat(e));return function(){if(J[e]){var t={};t[e]=!1,M(Object.assign(J,t))}}},V=G("title"),W=G("date"),_=G("recordType"),z=G("sourceArchive"),K=G("collections"),Q=function(){var e=!0,t={};return he(s)&&(t.title="Title is required",e=!1),he(m)?(t.date="Date is required.",e=!1):function(e){return de()(e,"MM/DD/YYYY",!0),!0}(m)||(t.date="Date either needs to be a year (yyyy) or month day and year (mm/dd/yyyy)",e=!1),he(R)&&(t.recordType="You need to select a record type",e=!1),he(Y)&&(t.sourceArchive="You need to select a source archive",e=!1),0===q.length&&(t.collections="You need to select at least one collection"),M(Object.assign(J,t)),e},X=void 0===t,Z=Object(r.useState)(null),$=Object(u.a)(Z,2),ee=$[0],te=$[1];Object(r.useEffect)((function(){X||function(e){return w.apply(this,arguments)}(t).then((function(t){if(t.record){var c=t.record;a(c.title),b(c.content),x(c.date),k(c.origin),S(c.author),A(c.recordType),D(c.sourceArchive);var r=[];c.collections.split(";").forEach((function(t){e.collectionToId[t]&&r.push(e.collectionToId[t])})),H(r)}}))}),[X,t,e.collectionToId]);var ce=function(e){var t=parseInt(e);if(isNaN(t))throw new Error("Couldn't parse int on string: ".concat(e));return t},re=X?"New Record":"Edit Record";return Object(d.jsxs)("form",{className:"uk-form-stacked uk-margin-top",onSubmit:function(e){if(e.preventDefault(),Q()){var c,r=(c={title:s,content:j,date:m,origin:v,author:y,recordType:ce(R)},Object(le.a)(c,"recordType",ce(Y)),Object(le.a)(c,"collections",q.map(ce)),c);P(X?r:Object.assign(r,{id:t})).then((function(e){e.error?console.log("Error: ",e.error):console.log(e.success)}))}},children:[ee&&Object(d.jsx)(be,{onChange:function(e){te(e)},message:ee,type:"error"}),Object(d.jsxs)("h1",{children:[" ",re," "]}),Object(d.jsxs)("div",{children:[Object(d.jsx)(Oe,{error:J.title}),Object(d.jsx)("label",{className:"uk-form-label",children:" Title "}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",value:s,onChange:function(e){V(),a(e.target.value)}})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Content "}),Object(d.jsx)("textarea",{className:"uk-form-width-large uk-textarea",value:j,onChange:function(e){b(e.target.value)}})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)(Oe,{error:J.date}),Object(d.jsx)("label",{className:"uk-form-label",children:" Date "}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",value:m,onChange:function(e){W(),x(e.target.value)}})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Origin "}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",value:v,onChange:function(e){k(e.target.value)}})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label",children:" Author "}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",value:y,onChange:function(e){S(e.target.value)}})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)(Oe,{error:J.recordType}),Object(d.jsx)("label",{className:"uk-form-label",children:" Record Type "}),Object(d.jsxs)("select",{className:"uk-select uk-form-width-large",value:R,onChange:function(e){_(),A(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:" No Record Type "}),e.recordTypes.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)(Oe,{error:J.sourceArchive}),Object(d.jsx)("label",{className:"uk-form-label",children:" Source Archive "}),Object(d.jsxs)("select",{className:"uk-select uk-form-width-large",value:Y,onChange:function(e){z(),D(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:" No Source Archive "}),e.sourceArchives.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("option",{value:t,children:[" ",c," "]},t)}))]})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)(Oe,{error:J.collections}),Object(d.jsx)("label",{className:"uk-form-label",children:" Collections "}),e.collections.map((function(e){var t=e.id,c=e.name;return Object(d.jsxs)("label",{className:"uk-form-label",children:[Object(d.jsx)("input",{className:"uk-checkbox",type:"checkbox",name:"collections",value:t,checked:q.includes(t),onChange:function(){K(),function(e){q.includes(e)?H(q.filter((function(t){return t!==e}))):H(q.concat(e))}(t)}},t),"\xa0\xa0  ",c]},t)}))]}),Object(d.jsx)("input",{className:"uk-button uk-button-primary uk-margin-top",type:"submit",value:"Add Record"})]})};var xe=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),c=t[0],n=t[1],s=Object(r.useState)(""),a=Object(u.a)(s,2),o=a[0],l=a[1],j=Object(r.useState)(""),b=Object(u.a)(j,2),h=b[0],O=b[1],m=Object(r.useState)(""),x=Object(u.a)(m,2),p=x[0],f=x[1],v=Object(r.useState)(1),k=Object(u.a)(v,2),g=k[0],N=k[1],y=Object(r.useState)([]),S=Object(u.a)(y,2),w=S[0],C=S[1],T=Object(r.useState)(null),A=Object(u.a)(T,2),I=A[0],P=A[1],Y=Object(r.useState)(null),D=Object(u.a)(Y,2),E=D[0],L=D[1];function q(e){return Object(d.jsxs)("div",{"uk-alert":!0,className:"uk-alert-success",children:[Object(d.jsx)(i.b,{className:"uk-alert-close","uk-close":!0,onClick:function(){L(null)}}),Object(d.jsx)("p",{children:e.message})]})}function H(e){return Object(d.jsxs)("div",{"uk-alert":!0,className:"uk-alert-danger",children:[Object(d.jsx)(i.b,{className:"uk-alert-close","uk-close":!0,onClick:function(){P(null)}}),Object(d.jsx)("p",{children:e.message})]})}return Object(r.useEffect)((function(){(function(){return U.apply(this,arguments)})().then((function(e){e.roles&&C(e.roles)}))}),[]),Object(d.jsxs)("form",{className:"uk-form-stacked uk-form-width-large uk-margin-top",onSubmit:function(e){e.preventDefault(),function(e){return R.apply(this,arguments)}({firstName:c,lastName:o,username:h,password:p,roleId:g}).then((function(e){e.success?(L(e.success),n(""),l(""),O(""),f(""),N(1)):P(e.error)}))},children:[E&&Object(d.jsx)(q,{message:E}),I&&Object(d.jsx)(H,{message:I}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label uk-margin-top",children:"First Name"}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",name:"firstName",onChange:function(e){n(e.target.value)},value:c})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label uk-margin-top",children:"Last Name"}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",name:"lastName",onChange:function(e){l(e.target.value),O(c.charAt(0).toLowerCase()+e.target.value.toLowerCase())},value:o})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label uk-margin-top",children:"Username"}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"text",name:"username",onChange:function(e){O(e.target.value)},value:h})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label uk-margin-top",children:"Password"}),Object(d.jsx)("input",{className:"uk-form-width-large uk-input",type:"password",name:"password",onChange:function(e){f(e.target.value)},value:p})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"uk-form-label uk-margin-top",children:"Role"}),Object(d.jsx)("select",{value:g,onChange:function(e){var t=parseInt(e.target.value);isNaN(t)?N(1):N(t)},children:0!==w.length&&w.map((function(e){var t,c=e.id,r=e.name;return Object(d.jsxs)("option",{value:c,children:[" ",(t=r,t.length>0?t[0].toUpperCase()+t.slice(1):t)," "]},c)}))})]}),Object(d.jsx)("input",{className:"uk-button uk-button-primary uk-margin-top",type:"submit",value:"Create User"})]})};function pe(e){var t=e.id,c=e.firstName,r=e.lastName,n=e.username,s=e.role;return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)(i.b,{to:"/editUser/".concat(t),className:"uk-icon-link uk-margin-small-right","uk-icon":"file-edit"})}),Object(d.jsx)("td",{children:Object(d.jsx)(i.b,{onClick:function(e){e.preventDefault();var c=parseInt(t);isNaN(c)&&console.log("Id was not a number"),function(e){return I.apply(this,arguments)}(t).then((function(e){e.error?console.log(e.error):console.log(e.success)}))},className:"uk-icon-link uk-margin-small-right","uk-icon":"trash"})}),Object(d.jsx)("td",{children:r}),Object(d.jsx)("td",{children:c}),Object(d.jsx)("td",{children:n}),Object(d.jsx)("td",{children:s})]})}function fe(e){var t=Object(r.useState)([]),c=Object(u.a)(t,2),n=c[0],s=c[1];return Object(r.useEffect)((function(){(function(){return A.apply(this,arguments)})().then((function(e){e.users&&s(e.users)}))}),[]),Object(d.jsxs)("table",{className:"uk-table uk-table-middle uk-table-divider uk-table-hover uk-margin-medium",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{className:"uk-table-small"}),Object(d.jsx)("th",{className:"uk-table-small"}),Object(d.jsx)("th",{className:"uk-width-small",children:"Last Name"}),Object(d.jsx)("th",{children:"First Name"}),Object(d.jsx)("th",{children:"Username"}),Object(d.jsx)("th",{children:"Role"})]})}),Object(d.jsx)("tbody",{children:n.map((function(e){var t=e.id,c=e.firstName,r=e.lastName,n=e.username,s=e.role;return Object(d.jsx)(pe,{id:t,firstName:c,lastName:r,username:n,role:s})}))})]})}var ve=function(){var e=$(),t=function(e){var t=e.get("offset");if(null===t)return 0;var c=parseInt(t);return isNaN(c)?0:c}(ne()),c=Object(r.useState)(null),n=Object(u.a)(c,2),s=n[0],a=n[1],l=Object(r.useState)([]),h=Object(u.a)(l,2),O=h[0],p=h[1],f=Object(r.useState)(null),v=Object(u.a)(f,2),g=v[0],N=v[1],y=Object(r.useState)([]),w=Object(u.a)(y,2),C=w[0],T=w[1],R=Object(r.useState)([]),A=Object(u.a)(R,2),U=A[0],I=A[1],P=Object(r.useState)({}),Y=Object(u.a)(P,2),D=Y[0],E=Y[1],L=Object(r.useState)([]),q=Object(u.a)(L,2),H=q[0],F=q[1],B=Object(r.useState)([]),J=Object(u.a)(B,2),M=J[0],G=(J[1],Object(r.useState)(!1)),V=Object(u.a)(G,2),W=V[0],_=V[1];return Object(r.useEffect)((function(){S({offset:t}).then((function(e){var t=e.records,c=e.pages,r=e.years,n=e.collections,s=e.sourceArchives,i=e.recordTypes;a(t),N(c),p(r),I(n.collections),E(n.collectionToId),F(s),T(i)}))}),[t]),Object(d.jsxs)("div",{className:"uk-marign-top",children:[Object(d.jsxs)("header",{children:[Object(d.jsx)("h1",{children:" History Database "}),Object(d.jsxs)("nav",{className:"uk-navbar",children:[Object(d.jsx)("div",{className:"uk-nav-bar-left",children:Object(d.jsx)("ul",{className:"uk-navbar-nav",children:e.user?Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{to:j("adminHome"),children:" Dashboard "})}):Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{to:j("home"),children:" Home "})})})}),Object(d.jsx)("div",{className:"uk-navbar-right",children:Object(d.jsx)("ul",{className:"uk-navbar-nav",children:e.user?Object(d.jsx)("li",{children:Object(d.jsxs)(i.b,{to:j("logout"),onClick:function(){e.signout()},children:[" ","Logout"," "]})}):Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{to:j("login"),children:" Login "})})})})]})]}),Object(d.jsxs)(o.d,{children:[Object(d.jsxs)(o.b,{path:j("viewRecord"),children:[Object(d.jsx)(b,{children:Object(d.jsx)("h1",{className:"uk-text-lead",children:" History Record "})}),Object(d.jsx)(K,{records:s})]}),Object(d.jsx)(o.b,{path:j("login"),children:Object(d.jsx)(re,{})}),Object(d.jsx)(ce,{path:j("newRecord"),children:Object(d.jsx)(me,{recordTypes:C,collections:U,sourceArchives:H,recordStatus:M})}),Object(d.jsx)(ce,{path:j("editRecord"),children:Object(d.jsx)(me,{recordTypes:C,collections:U,sourceArchives:H,recordStatus:M,collectionToId:D})}),Object(d.jsx)(ce,{path:j("adminHome"),children:Object(d.jsx)(oe,{records:s})}),Object(d.jsx)(ce,{path:j("addUser"),children:Object(d.jsx)(xe,{})}),Object(d.jsx)(ce,{path:j("showUsers"),children:Object(d.jsx)(fe,{})}),Object(d.jsx)(o.b,{path:j("logout"),children:Object(d.jsx)(o.a,{to:j("home")})}),e.user?Object(d.jsx)(o.b,{path:j("home"),children:Object(d.jsx)(o.a,{to:j("adminHome")})}):Object(d.jsxs)(o.b,{exact:!0,path:j("home"),children:[Object(d.jsxs)(b,{children:[Object(d.jsx)("h1",{className:"uk-text-lead",children:" History Listing "}),Object(d.jsx)(x,{years:O||[],recordTypes:C,collections:U,sourceArchives:H,onSubmit:function(e){var c=e.query,r=e.searchYear,n=e.searchCollection,s=e.searchSourceArchive,i=e.searchRecordType;S({offset:t,query:c,searchYear:r,searchCollection:n,searchSourceArchive:s,searchRecordType:i}).then((function(e){var t=e.records,c=e.pages,r=e.years;a(t),N(c),p(r),_(!0)}))}}),Object(d.jsx)(m,{currentPage:t||0,pages:g})]}),Object(d.jsx)(k,{searched:W,records:s})]})]})]})},ke=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,39)).then((function(t){var c=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,a=t.getTTFB;c(e),r(e),n(e),s(e),a(e)}))};a.a.render(Object(d.jsx)(te,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(ve,{})})})}),document.getElementById("root")),ke()}},[[38,1,2]]]);
//# sourceMappingURL=main.dd51a069.chunk.js.map